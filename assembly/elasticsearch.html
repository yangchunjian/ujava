<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.32" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://ujava.cn/assembly/elasticsearch.html"><meta property="og:site_name" content="UJava"><meta property="og:title" content="组件ElasticSearch"><meta property="og:description" content="一、 简介 Elasticsearch 是一个分布式可扩展的实时搜索和分析引擎,一个建立在全文搜索引擎 Apache Lucene™ 基础上的搜索引擎.当然 Elasticsearch 并不仅仅是 Lucene 那么简单，它不仅包括了全文搜索功能，还可以进行以下工作: 一个分布式的实时文档存储，每个字段可以被索引与搜索 一个分布式实时分析搜索引擎 能胜..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-04-15T03:42:50.000Z"><meta property="article:author" content="UJava"><meta property="article:tag" content="组件"><meta property="article:modified_time" content="2024-04-15T03:42:50.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"组件ElasticSearch","image":[""],"dateModified":"2024-04-15T03:42:50.000Z","author":[{"@type":"Person","name":"UJava","url":"https://ujava.cn/article/"}]}</script><meta name="robots" content="all"><meta name="author" content="ujava"><meta name="baidu-site-verification" content="codeva-wnNGUni4cx"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="keywords" content="Java基础, 多线程, JVM, 虚拟机, 数据库, MySQL, Spring, Redis, MyBatis, 系统设计, 分布式, RPC, 高可用, 高并发"><meta name="apple-mobile-web-app-capable" content="yes"><script>var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?d44ac18afe199d84cbb99448b4b9baec";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();</script><link rel="alternate" type="application/atom+xml" href="https://ujava.cn/atom.xml" title="UJava Atom Feed"><link rel="alternate" type="application/json" href="https://ujava.cn/feed.json" title="UJava JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://ujava.cn/rss.xml" title="UJava RSS Feed"><link rel="icon" href="/favicon.ico"><title>组件ElasticSearch | UJava</title><meta name="description" content="一、 简介 Elasticsearch 是一个分布式可扩展的实时搜索和分析引擎,一个建立在全文搜索引擎 Apache Lucene™ 基础上的搜索引擎.当然 Elasticsearch 并不仅仅是 Lucene 那么简单，它不仅包括了全文搜索功能，还可以进行以下工作: 一个分布式的实时文档存储，每个字段可以被索引与搜索 一个分布式实时分析搜索引擎 能胜...">
    <link rel="preload" href="/assets/style-caUhHhY2.css" as="style"><link rel="stylesheet" href="/assets/style-caUhHhY2.css">
    <link rel="modulepreload" href="/assets/app-CMWvZbP3.js"><link rel="modulepreload" href="/assets/elasticsearch.html-BHfDjF4E.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">UJava</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/required/" aria-label="快速上手"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>快速上手<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/mind/" aria-label="设计思想"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>设计思想<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/design/" aria-label="设计模式"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>设计模式<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="项目相关"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>项目相关</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/home.html" aria-label="项目介绍"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>项目介绍<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/project/changelog.html" aria-label="更新记录"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>更新记录<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/manage/" aria-label="管理经验"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>管理经验<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="网站相关"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>网站相关</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/author/" aria-label="关于作者"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>关于作者<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/timeline/" aria-label="更新历史"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>更新历史<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="游戏相关"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>游戏相关</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="https://ujava.cn/2048" rel="noopener noreferrer" target="_blank" aria-label="2048" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>2048<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://ujava.cn/pacman" rel="noopener noreferrer" target="_blank" aria-label="吃豆人" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>吃豆人<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://ujava.cn/jump" rel="noopener noreferrer" target="_blank" aria-label="跳一跳" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>跳一跳<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">必读</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计思想</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计注意</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计基础</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计原理</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计模式</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计规范</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计框架</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计组件</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/devops.html" aria-label="组件DevOps"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件DevOps<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/dubbo.html" aria-label="组件Dubbo"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Dubbo<!----></a></li><li><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/assembly/elasticsearch.html" aria-label="组件ElasticSearch"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件ElasticSearch<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/erp.html" aria-label="组件ERP"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件ERP<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/eureka.html" aria-label="组件Eureka"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Eureka<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/flink.html" aria-label="组件Flink"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Flink<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/flume.html" aria-label="组件Flume"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Flume<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/hadoop.html" aria-label="组件Hadoop"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Hadoop<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/hbase.html" aria-label="组件Hbase"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Hbase<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/hive.html" aria-label="组件Hive"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Hive<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/hystrix.html" aria-label="组件Hystrix"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Hystrix<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/jenkins.html" aria-label="组件Jenkins"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Jenkins<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/k8s.html" aria-label="组件Kubernetes"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Kubernetes<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/matlab.html" aria-label="组件MatLab"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件MatLab<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/mock.html" aria-label="组件Mock"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Mock<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/mongodb.html" aria-label="组件MongoDB"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件MongoDB<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/mq.html" aria-label="组件MQ"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件MQ<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/mybatis.html" aria-label="组件MyBatis"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件MyBatis<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/mysql.html" aria-label="组件MySQL"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件MySQL<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/netty.html" aria-label="组件Netty"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Netty<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/nocas.html" aria-label="组件Nocas"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Nocas<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/reactor.html" aria-label="组件Reactor"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Reactor<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/redis.html" aria-label="组件Redis"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Redis<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/serverless.html" aria-label="组件Serverless"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Serverless<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/spark.html" aria-label="组件Spark"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Spark<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/spring.html" aria-label="组件Spring"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Spring<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/springcloud.html" aria-label="组件SpringCloud"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件SpringCloud<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/container.html" aria-label="组件Web"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Web<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/webflux.html" aria-label="组件WebFlux"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件WebFlux<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/assembly/zookeeper.html" aria-label="组件ZooKeeper"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件ZooKeeper<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">设计综合</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">项目管理</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件ElasticSearch</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://ujava.cn/article/" target="_blank" rel="noopener noreferrer">UJava</a></span><span property="author" content="UJava"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-04-15T03:25:51.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 28 分钟</span><meta property="timeRequired" content="PT28M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category5 clickable" role="navigation">设计组件</span><!--]--><meta property="articleSection" content="设计组件"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag0 clickable" role="navigation">组件</span><!--]--><meta property="keywords" content="组件"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#一、-简介">一、 简介</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-es优点">1.ES优点</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-es缺点">2.ES缺点</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-es使用场景">3.ES使用场景</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-dsl语言高级查询">4.DSL语言高级查询</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-文档映射">5.文档映射</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-suggest-search">6.suggest search</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#二、es核心原理">二、ES核心原理</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-索引-index">1.索引（Index）</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-文档类型-type">2.文档类型（Type）</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-文档-document">3.文档（Document）</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-字段-field">4.字段（Field）</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-倒排索引">5.倒排索引</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-分词器">6.分词器</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-es评分机制">7.es评分机制</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#三、elasticsearch架构设计">三、ElasticSearch架构设计</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-master节点">1.Master节点</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-datanode节点">2.DataNode节点</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-分片">3.分片</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-副本">4.副本</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-es集群读写流程">5.es集群读写流程</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#四、elasticsearch应用">四、ElasticSearch应用</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-elasticsearch-sql">1.Elasticsearch SQL</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-java客户端">2.Java客户端</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-es和mysql的双写">3.es和mysql的双写</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#五、elasticsearch安装配置">五、ElasticSearch安装配置</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-安装elasticsearch">1.安装ElasticSearch</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-安装kibana">2.安装Kibana</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="一、-简介" tabindex="-1"><a class="header-anchor" href="#一、-简介"><span>一、 简介</span></a></h2><p>Elasticsearch 是一个分布式可扩展的实时搜索和分析引擎,一个建立在全文搜索引擎 Apache Lucene™ 基础上的搜索引擎.当然 Elasticsearch 并不仅仅是 Lucene 那么简单，它不仅包括了全文搜索功能，还可以进行以下工作:</p><ul><li>一个分布式的实时文档存储，每个字段可以被索引与搜索</li><li>一个分布式实时分析搜索引擎</li><li>能胜任上百个服务节点的扩展，并支持 PB 级别的结构化或者非结构化数据</li></ul><h3 id="_1-es优点" tabindex="-1"><a class="header-anchor" href="#_1-es优点"><span>1.ES优点</span></a></h3><ul><li>1.支持全文搜索，并基于倒排索引，检索速度特别快</li><li>2.高可用性，支持集群部署，任何节点失效系统自动调整。</li></ul><h3 id="_2-es缺点" tabindex="-1"><a class="header-anchor" href="#_2-es缺点"><span>2.ES缺点</span></a></h3><ul><li>1.对硬件要求较高，es比较吃内存，需要存储资源来支持大量数据的处理。</li><li>2.不支持事务等ACID属性。</li></ul><h3 id="_3-es使用场景" tabindex="-1"><a class="header-anchor" href="#_3-es使用场景"><span>3.ES使用场景</span></a></h3><p>1.聊天消息</p><ul><li>数据量大，业务关系简单，会通过关键字搜索聊天信息</li><li>非核心业务，不会频繁crud</li><li>没有事务的场景，可以不用支持事务</li></ul><p>2.日志纪录</p><p>Elasticsearch 一个典型应用就是 ELK 日志分析系统。如nginx接入请求的访问日志纪录。</p><p>3.热点数据搜索</p><p>如电商业务的商品搜索等。</p><h3 id="_4-dsl语言高级查询" tabindex="-1"><a class="header-anchor" href="#_4-dsl语言高级查询"><span>4.DSL语言高级查询</span></a></h3><h4 id="_1-query-dsl概述" tabindex="-1"><a class="header-anchor" href="#_1-query-dsl概述"><span>1.Query DSL概述</span></a></h4><p>Domain Specific Language 领域专用语言</p><ul><li>Elasticsearch provides a ful1 Query DSL based on JSON to define queries</li><li>Elasticsearch提供了基于JSON的DSL来定义查询。</li></ul><p>DSL由叶子查询子句和复合查询子句两种子句组成。</p><figure><img src="/assets/img_111-DVchoEW0.png" alt="img_111.png" tabindex="0" loading="lazy"><figcaption>img_111.png</figcaption></figure><h4 id="_2-模糊匹配" tabindex="-1"><a class="header-anchor" href="#_2-模糊匹配"><span>2.模糊匹配</span></a></h4><p>模糊匹配主要是针对文本类型的字段，文本类型的字段会对内容进行分词，对查询时，也会对搜索条件进行分词，然后通过倒排索引查找到匹配的数据，模糊匹配主要通过match等参数来实现</p><ul><li>match : 通过match关键词模糊匹配条件内容</li><li>prefix : 前缀匹配</li><li>regexp : 通过正则表达式来匹配数据</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>POST <span class="token operator">/</span>es_db<span class="token operator">/</span>_doc<span class="token operator">/</span>_search
{
<span class="token string">&quot;from&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token string">&quot;size&quot;</span>: <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token string">&quot;query&quot;</span>: {
<span class="token string">&quot;match&quot;</span>: {
<span class="token string">&quot;address&quot;</span>: <span class="token string">&quot;广州&quot;</span>
}
}
}
    
<span class="token keyword">SQL</span>: <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> address <span class="token operator">like</span> <span class="token string">&#39;%广州%&#39;</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-精确匹配" tabindex="-1"><a class="header-anchor" href="#_3-精确匹配"><span>3.精确匹配</span></a></h4><ul><li>term : 单个条件相等</li><li>terms : 单个字段属于某个值数组内的值</li><li>range : 字段属于某个范围内的值</li><li>exists : 某个字段的值是否存在</li><li>ids : 通过ID批量查询</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>POST <span class="token operator">/</span>es_db<span class="token operator">/</span>_doc<span class="token operator">/</span>_search
{
<span class="token string">&quot;query&quot;</span>: {
<span class="token string">&quot;term&quot;</span>: {
<span class="token string">&quot;name&quot;</span>: <span class="token string">&quot;admin&quot;</span>
}
}
}

<span class="token keyword">SQL</span>: <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&#39;admin&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-聚合搜索" tabindex="-1"><a class="header-anchor" href="#_4-聚合搜索"><span>4.聚合搜索</span></a></h4><p><strong>1.bucket和metric</strong></p><p>bucket就是一个聚合搜索时的数据分组。</p><p>如：销售部门有员工张三和李四，开发部门有员工王五和赵六。那么根据部门分组聚合得到结果就是两个bucket。销售部门bucket中有张三和李四，开发部门 bucket中有王五和赵六。</p><p>metric就是对一个bucket数据执行的统计分析。如上述案例中，开发部门有2个员工，销售部门有2个员工，这就是metric。</p><p>metric有多种统计，如：求和，最大值，最小值，平均值等。</p><p>用一个大家容易理解的SQL语法来解释，如：select count() from table group by column。那么group by column分组后的每组数据就是bucket。对每个分组执行的count()就是metric。</p><p>es最重要的核心功能是数据检索，统计分析我认为不是es最核心的功能，想这种离线统计应该由其他的替代方案去做，所以如果想了解更多es聚合搜索相关知识可以参考官网或者其他博客</p><h3 id="_5-文档映射" tabindex="-1"><a class="header-anchor" href="#_5-文档映射"><span>5.文档映射</span></a></h3><p>ES中映射可以分为动态映射和静态映射</p><h4 id="_1-动态映射" tabindex="-1"><a class="header-anchor" href="#_1-动态映射"><span>1.动态映射</span></a></h4><p>在关系数据库中，需要事先创建数据库，然后在该数据库下创建数据表，并创建表字段、类型、长度、主键等，最后才能基于表插入数据。而Elasticsearch中不需要定义Mapping映射（即关系型数据库的表、字段等），在文档写入Elasticsearch时，会根据文档字段自动识别类型，这种机制称之为动态映射。<br> 动态映射规则如下：</p><figure><img src="/assets/img_112-BH8s6tNl.png" alt="img_112.png" tabindex="0" loading="lazy"><figcaption>img_112.png</figcaption></figure><h4 id="_2-静态映射" tabindex="-1"><a class="header-anchor" href="#_2-静态映射"><span>2.静态映射</span></a></h4><p>静态映射是在Elasticsearch中也可以事先定义好映射，包含文档的各字段类型、分词器等，这种方式称之为静态映射。</p><h4 id="_3-核心类型-core-datatype" tabindex="-1"><a class="header-anchor" href="#_3-核心类型-core-datatype"><span>3.核心类型（Core datatype）</span></a></h4><ul><li>字符串：string，string类型包含 text 和 keyword。</li><li>text：该类型被用来索引长文本，在创建索引前会将这些文本进行分词，转化为词的组合，建立索引；允许es来检索这些词，text类型不能用来排序和聚合。</li><li>keyword：该类型不能分词，可以被用来检索过滤、排序和聚合，keyword类型不可用text进行分词模糊检索。</li><li>数值型：long、integer、short、byte、double、float</li><li>日期型：date</li><li>布尔型：boolean</li></ul><h4 id="_4-数据建模" tabindex="-1"><a class="header-anchor" href="#_4-数据建模"><span>4.数据建模</span></a></h4><p>就是针对于关系型数据库的一对多数据模型，而我自己认为es的主要应用场景是全文搜索引擎，这种复杂的业务关系就应该由关系型数据库如mysql去完成数据建模和存储，而不是交给es去建模存储，当然es也是提供了Parent / Child相关机制继续数据建模，如果有场景使用到，自己去参考对应的官方文档了解即可，但我自己不建议这样做。</p><h4 id="_5-分页查询" tabindex="-1"><a class="header-anchor" href="#_5-分页查询"><span>5.分页查询</span></a></h4><p>1.语法</p><p>在存在大量数据时，一般我们进行查询都需要进行分页查询。例如：我们指定页码、并指定每页显示多少条数据，然后Elasticsearch返回对应页码的数据。</p><p>在执行查询时，可以指定from（从第几条数据开始查起）和size（每页返回多少条）数据，就可以轻松完成分页。</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>POST <span class="token operator">/</span>es_db<span class="token operator">/</span>_doc<span class="token operator">/</span>_search
{
<span class="token string">&quot;from&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token string">&quot;size&quot;</span>: <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token string">&quot;query&quot;</span>: {
<span class="token string">&quot;match&quot;</span>: {
<span class="token string">&quot;address&quot;</span>: <span class="token string">&quot;广州天河&quot;</span>
}
}
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.scroll解决深分页问题</p><p>前面使用from和size方式，查询在1W条数据以内都是OK的，但如果数据比较多的时候，会出现性能问题。Elasticsearch做了一个限制，不允许查询的是10000条以后的数据。如果要查询1W条以后的数据，需要使用Elasticsearch中提供的scroll游标来查询。</p><p>在进行大量分页时，每次分页都需要将要查询的数据进行重新排序，这样非常浪费性能。</p><p>使用scroll是将要用的数据一次性排序好，然后分批取出,性能要比from + size好得多。</p><p>使用scroll查询后，排序后的数据会保持一定的时间，后续的分页查询都从该快照取数据即可。</p><p>第一次使用scroll分页查询</p><p>此处，我们让排序的数据保持1分钟，所以设置scroll为1m</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>GET <span class="token operator">/</span>es_db<span class="token operator">/</span>_search?scroll<span class="token operator">=</span><span class="token number">1</span>m
{
<span class="token string">&quot;query&quot;</span>: {
<span class="token string">&quot;multi_match&quot;</span>:{
<span class="token string">&quot;query&quot;</span>:<span class="token string">&quot;广州长沙张三&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;fields&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;address&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span>
}
}<span class="token punctuation">,</span>
<span class="token string">&quot;size&quot;</span>:<span class="token number">100</span>
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行后，我们注意到，在响应结果中有一项：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token string">&quot;_scroll_id&quot;</span>: <span class="token string">&quot;DXF1ZXJ5QW5kRmV0Y2gBAAAAAAAAAZEWY2VQZXBia1JTVkdhTWkwSl9GaUYtQQ==&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>后续，我们需要根据这个_scroll_id来进行查询</p><p>第二次直接使用scroll id进行查询</p><h3 id="_6-suggest-search" tabindex="-1"><a class="header-anchor" href="#_6-suggest-search"><span>6.suggest search</span></a></h3><p>suggest search（completion suggest）：就是建议搜索或称为搜索建议，也可以叫做自动完成-auto completion。类似百度中的搜索联想提示功能。</p><p>ES实现suggest的时候，性能非常高，其构建的不是倒排索引，也不是正排索引，就是纯的用于进行前缀搜索的一种特殊的数据结构，而且会全部放在内存中，所以suggest search进行的前缀搜索提示，性能是非常高。</p><p>需要使用suggest的时候，必须在定义index时，为其mapping指定开启suggest。</p><p>具体如下:</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>PUT <span class="token operator">/</span>movie
{
<span class="token string">&quot;mappings&quot;</span>: {
<span class="token string">&quot;properties&quot;</span> : {
<span class="token string">&quot;title&quot;</span> : {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;fields&quot;</span>: {
<span class="token string">&quot;suggest&quot;</span> : {
<span class="token string">&quot;type&quot;</span> : <span class="token string">&quot;completion&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;ik_max_word&quot;</span>
}
}
}<span class="token punctuation">,</span>
<span class="token string">&quot;content&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;ik_max_word&quot;</span>
}
}
}
}

PUT <span class="token operator">/</span>movie<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span>
{
<span class="token string">&quot;title&quot;</span>: <span class="token string">&quot;西游记电影系列&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;content&quot;</span>: <span class="token string">&quot;西游记之月光宝盒将与2021年进行......&quot;</span>
}

PUT <span class="token operator">/</span>movie<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">2</span>
{
<span class="token string">&quot;title&quot;</span>: <span class="token string">&quot;西游记文学系列&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;content&quot;</span>: <span class="token string">&quot;某知名网络小说作家已经完成了大话西游同名小说的出版&quot;</span>
}

PUT <span class="token operator">/</span>movie<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">3</span>
{
<span class="token string">&quot;title&quot;</span>: <span class="token string">&quot;西游记之大话西游手游&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;content&quot;</span>: <span class="token string">&quot;网易游戏近日出品了大话西游经典IP的手游，正在火爆内测中&quot;</span>
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>suggest 搜索：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>GET <span class="token operator">/</span>movie<span class="token operator">/</span>_search
{
<span class="token string">&quot;suggest&quot;</span>: {
<span class="token string">&quot;my-suggest&quot;</span> : {
<span class="token string">&quot;prefix&quot;</span> : <span class="token string">&quot;西游记&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;completion&quot;</span> : {
<span class="token string">&quot;field&quot;</span> : <span class="token string">&quot;title.suggest&quot;</span>
}
}
}
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、es核心原理" tabindex="-1"><a class="header-anchor" href="#二、es核心原理"><span>二、ES核心原理</span></a></h2><p>ES存储模型</p><p>Elasticsearch与关系数据库结构对应</p><figure><img src="/assets/img_113-DbtBrGWo.png" alt="img_113.png" tabindex="0" loading="lazy"><figcaption>img_113.png</figcaption></figure><p>ElasticSearch的对象模型，跟关系型数据库模型相比：</p><h3 id="_1-索引-index" tabindex="-1"><a class="header-anchor" href="#_1-索引-index"><span>1.索引（Index）</span></a></h3><p>相当于数据库，用于定义文档类型的存储；在同一个索引中，同一个字段只能定义一个数据类型；</p><p>一个索引就是一个拥有几分相似特征的文档的集合。比如说，可以有一个客户数据的索引，另一个产品目录的索引，还有一个订单数据的索引<br> 一个索引由一个名字来标识（必须全部是小写字母的），并且当我们要对对应于这个索引中的文档进行索引、搜索、更新和删除的时候，都要使用到这个名字</p><h3 id="_2-文档类型-type" tabindex="-1"><a class="header-anchor" href="#_2-文档类型-type"><span>2.文档类型（Type）</span></a></h3><p>相当于关系表，用于描述文档中的各个字段的定义；不同的文档类型，能够存储不同的字段，服务于不同的查询请求；</p><p>每一个字段都应该有一个对应的类型，例如：Text、Keyword、Byte等</p><h3 id="_3-文档-document" tabindex="-1"><a class="header-anchor" href="#_3-文档-document"><span>3.文档（Document）</span></a></h3><p>相当于关系表的数据行，存储数据的载体，包含一个或多个存有数据的字段；</p><p>一个文档是一个可被索引的基础信息单元，类似一条记录。文档以JSON（Javascript Object Notation）格式来表示；</p><h3 id="_4-字段-field" tabindex="-1"><a class="header-anchor" href="#_4-字段-field"><span>4.字段（Field）</span></a></h3><p>文档的一个Key/Value对；</p><ul><li>词（Term）：表示文本中的一个单词；</li><li>标记（Token）：表示在字段中出现的词，由该词的文本、偏移量（开始和结束）以及类型组成；</li></ul><p>相当于是数据表的字段|列</p><h3 id="_5-倒排索引" tabindex="-1"><a class="header-anchor" href="#_5-倒排索引"><span>5.倒排索引</span></a></h3><p>全文搜索引擎的技术原理被称为“倒排索引”（Inverted index），也常被称为反向索引、置入档案或反向档案，是一种索引方法，其基本原理是建立单词到文档的索引。</p><p>之所以被称为“倒排”索引，是和“正排“索引相对的，“正排索引”的基本原理是建立文档到单词的索引。我们通过一个简单的样例来说明这两种索引的差异。</p><p>假设我们有一个技术文章的网站，里面收集了各种技术文章，用户可以在网站浏览或者搜索文章。</p><p>正排索引示例：</p><figure><img src="/assets/img_114-CimtMFtD.png" alt="img_114.png" tabindex="0" loading="lazy"><figcaption>img_114.png</figcaption></figure><p>（注：文章内容仅为示范，文章内容实际上存储的是几千字的内容。）</p><p>正排索引适用于根据文档名称来查询文档内容。例如，用户在网站上单击了“面向对象葵花宝典是什么”，网站根据文章标题查询文章的内容展示给用户。</p><p>倒排索引示例：</p><figure><img src="/assets/img_115-BLJJiTUh.png" alt="img_115.png" tabindex="0" loading="lazy"><figcaption>img_115.png</figcaption></figure><p>（注：表格仅为示范，不是完整的倒排索引表格，实际上的倒排索引有成千上万行，因为每个单词就是一个索引。）</p><p>倒排索引适用于根据关键词来查询文档内容，它是根据文章内容中的关键字建立索引，而值对应于文档ID，而搜索出来的结果就是文档ID所在行的所有内容。</p><p>例如，用户只是想看“设计”相关的文章，网站需要将文章内容中包含“设计”一词的文章都搜索出来展示给用户。</p><p>要注意倒排索引的两个重要细节：</p><ul><li>倒排索引中的所有词项对应一个或多个文档；</li><li>倒排索引中的词项根据字典顺序升序排列<br> Elasticsearch 也是 Master-slave 架构，也实现了数据的分片和备份。</li></ul><h3 id="_6-分词器" tabindex="-1"><a class="header-anchor" href="#_6-分词器"><span>6.分词器</span></a></h3><p>对于英文来说，分词比较简单，只需要按照单词的空格来进行分词。<br> 如下所示<br><img src="/assets/img_116-j4vpYIyK.png" alt="img_116.png" loading="lazy"></p><p>如果要搜索hello这个关键词，则匹配的结果将是下面两个内容</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>hello world
hello elasticsearch

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ES的默认分词设置是standard，这个在中文分词时就比较尴尬了，会单字拆分，比如我搜索关键词“清华大学”，这时候会按“清”，“华”，“大”，“学”去分词，然后搜出来的都是些“清清的河水”，“中华儿女”，“地大物博”，“学而不思则罔”之类的莫名其妙的结果。</p><p>这里我们就想把这个分词方式修改一下，于是呢，就想到了ik分词器，有两种ik_smart和ik_max_word。</p><p>ik_smart会将“清华大学”整个分为一个词，而ik_max_word会将“清华大学”分为“清华大学”，“清华”和“大学”，按需选其中之一就可以了。</p><p>修改默认分词方法(这里修改school_index索引的默认分词为：ik_max_word)：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>PUT <span class="token operator">/</span>school_index
{
<span class="token string">&quot;settings&quot;</span> : {
<span class="token string">&quot;index&quot;</span> : {
<span class="token string">&quot;analysis.analyzer.default.type&quot;</span>: <span class="token string">&quot;ik_max_word&quot;</span>
}
}
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>分词器工作流程<br><img src="/assets/img_117-nFFqt2S3.png" alt="img_117.png" loading="lazy"><br> 分词器由三部分组成：</p><ul><li>Character Filter：将文本中html标签剔除掉。</li><li>Tokenizer：按照规则进行分词，在英文中按照空格分词</li><li>Token Filter：将切分的单词进行加工，小写，删除 stopwords(停顿词，a、an、the、is等),增加同义词</li></ul><p>每个组件的作用，可参考下面的例子</p><p>character filter：在一段文本进行分词之前，先进行预处理，比如说最常见的就是，过滤html标签</p><p>tokenizer：分词，hello you and me --&gt; hello, you, and, me</p><p>token filter：lowercase，stop word，synonymom，liked --&gt; like，Tom --&gt; tom，a/the/an --&gt; 干掉，small --&gt; little</p><p>ES内置分词器</p><ul><li>Standard Analyzer - 默认分词器，按词切分，小写处理</li><li>Simple Analyzer - 按照非字母切分(符号被过滤), 小写处理</li><li>Stop Analyzer - 小写处理，停用词过滤(the,a,is)</li><li>Whitespace Analyzer - 按照空格切分，不转小写</li><li>Keyword Analyzer - 不分词，直接将输入当作输出</li><li>Patter Analyzer - 正则表达式，默认\W+(非字符分割)</li><li>Language - 提供了30多种常见语言的分词器</li><li>Customer Analyzer 自定义分词器</li></ul><p>每个内置分词器的作用，可参考下面的例子</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">Set</span> the shape <span class="token keyword">to</span> semi<span class="token operator">-</span>transparent <span class="token keyword">by</span> calling set_trans<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

standard analyzer：<span class="token keyword">set</span><span class="token punctuation">,</span> the<span class="token punctuation">,</span> shape<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> semi<span class="token punctuation">,</span> transparent<span class="token punctuation">,</span> <span class="token keyword">by</span><span class="token punctuation">,</span> calling<span class="token punctuation">,</span> set_trans<span class="token punctuation">,</span> <span class="token number">5</span>（默认的是standard）

<span class="token keyword">simple</span> analyzer：<span class="token keyword">set</span><span class="token punctuation">,</span> the<span class="token punctuation">,</span> shape<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> semi<span class="token punctuation">,</span> transparent<span class="token punctuation">,</span> <span class="token keyword">by</span><span class="token punctuation">,</span> calling<span class="token punctuation">,</span> <span class="token keyword">set</span><span class="token punctuation">,</span> trans

whitespace analyzer：<span class="token keyword">Set</span><span class="token punctuation">,</span> the<span class="token punctuation">,</span> shape<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> semi<span class="token operator">-</span>transparent<span class="token punctuation">,</span> <span class="token keyword">by</span><span class="token punctuation">,</span> calling<span class="token punctuation">,</span> set_trans<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

stop analyzer:移除停用词，比如a the it等等
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>定制分词器</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>PUT <span class="token operator">/</span>my_index
{
<span class="token string">&quot;settings&quot;</span>: {
<span class="token string">&quot;analysis&quot;</span>: {
<span class="token string">&quot;analyzer&quot;</span>: {
<span class="token string">&quot;es_std&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;stopwords&quot;</span>: <span class="token string">&quot;_english_&quot;</span>
}
}
}
}
}

GET <span class="token operator">/</span>my_index<span class="token operator">/</span>_analyze
{
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;text&quot;</span>: <span class="token string">&quot;a dog is in the house&quot;</span>
}

GET <span class="token operator">/</span>my_index<span class="token operator">/</span>_analyze
{
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;es_std&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;text&quot;</span>:<span class="token string">&quot;a dog is in the house&quot;</span>
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>定制化自己的分词器</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>PUT <span class="token operator">/</span>my_index
{
<span class="token string">&quot;settings&quot;</span>: {
<span class="token string">&quot;analysis&quot;</span>: {
<span class="token string">&quot;char_filter&quot;</span>: {
<span class="token string">&quot;&amp;_to_and&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;mapping&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;mappings&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;&amp;=&gt; and&quot;</span><span class="token punctuation">]</span>
}
}<span class="token punctuation">,</span>
<span class="token string">&quot;filter&quot;</span>: {
<span class="token string">&quot;my_stopwords&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;stop&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;stopwords&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;the&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span>
}
}<span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: {
<span class="token string">&quot;my_analyzer&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;char_filter&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;html_strip&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&amp;_to_and&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;tokenizer&quot;</span>: <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;filter&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;my_stopwords&quot;</span><span class="token punctuation">]</span>
}
}
}
}
}

GET <span class="token operator">/</span>my_index<span class="token operator">/</span>_analyze
{
<span class="token string">&quot;text&quot;</span>: <span class="token string">&quot;tom&amp;jerry are a friend in the house, &lt;a&gt;, HAHA!!&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;my_analyzer&quot;</span>
}

PUT <span class="token operator">/</span>my_index<span class="token operator">/</span>_mapping<span class="token operator">/</span>my_type
{
<span class="token string">&quot;properties&quot;</span>: {
<span class="token string">&quot;content&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;my_analyzer&quot;</span>
}
}
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>IK热更新</p><p>每次都是在es的扩展词典中，手动添加新词语，很坑</p><p>（1）每次添加完，都要重启es才能生效，非常麻烦</p><p>（2）es是分布式的，可能有数百个节点，你不能每次都一个一个节点上面去修改</p><p>es不停机，直接我们在外部某个地方添加新的词语，es中立即热加载到这些新词语<br> IKAnalyzer.cfg.xml</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token operator">&lt;</span>properties<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token keyword">comment</span><span class="token operator">&gt;</span>IK Analyzer 扩展配置<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">comment</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--用户可以在这里配置自己的扩展字典 --&gt;</span>
	<span class="token operator">&lt;</span>entry <span class="token keyword">key</span><span class="token operator">=</span><span class="token string">&quot;ext_dict&quot;</span><span class="token operator">&gt;</span>location<span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--用户可以在这里配置自己的扩展停止词字典--&gt;</span>
	<span class="token operator">&lt;</span>entry <span class="token keyword">key</span><span class="token operator">=</span><span class="token string">&quot;ext_stopwords&quot;</span><span class="token operator">&gt;</span>location<span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--用户可以在这里配置远程扩展字典 --&gt;</span>
	<span class="token operator">&lt;</span>entry <span class="token keyword">key</span><span class="token operator">=</span><span class="token string">&quot;remote_ext_dict&quot;</span><span class="token operator">&gt;</span>words_location<span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">&gt;</span> 
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--用户可以在这里配置远程扩展停止词字典--&gt;</span>
	<span class="token operator">&lt;</span>entry <span class="token keyword">key</span><span class="token operator">=</span><span class="token string">&quot;remote_ext_stopwords&quot;</span><span class="token operator">&gt;</span>words_location<span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>properties<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-es评分机制" tabindex="-1"><a class="header-anchor" href="#_7-es评分机制"><span>7.es评分机制</span></a></h3><p>当你通过关键字搜索相关文档时，可能会出现多个文档，这些文档的顺序是通过一个max_score属性的大小从高到低顺序展现出来的，max_score属性就是我们所说的评分。</p><p>打分算法</p><p>relevance score算法，简单来说，就是计算出，一个索引中的文本，与搜索文本，他们之间的关联匹配程度</p><p>Elasticsearch使用的是 term frequency/inverse document frequency算法，简称为TF/IDF算法</p><p>总公式</p><p>max_score = boost * idf * tf</p><figure><img src="/assets/img_118-CnEqH6yc.png" alt="img_118.png" tabindex="0" loading="lazy"><figcaption>img_118.png</figcaption></figure><p>对于查询权重我们可以自己定义</p><p>如下面所示：</p><figure><img src="/assets/img_119-D9NTfG7k.png" alt="img_119.png" tabindex="0" loading="lazy"><figcaption>img_119.png</figcaption></figure><p>TF算法</p><p>Term frequency：搜索文本中的各个词条在field文本中出现了多少次，出现次数越多，就越相关</p><ul><li>搜索请求：hello world</li><li>doc1：hello you, and world is very good</li><li>doc2：hello, how are you</li></ul><p>doc1这个文档匹配了2个单词，所以doc1的得分要高一些。</p><p>2.IDF算法<br> Inverse document frequency：搜索文本中的各个词条在整个索引的所有文档中出现了多少次，出现的次数越多，就越不相关</p><ul><li>搜索请求：hello world</li><li>doc1：hello, tuling is very good</li><li>doc2：hi world, how are you</li></ul><p>比如说，在index中有1万条document，hello这个单词在所有的document中，一共出现了1000次；world这个单词在所有的document中，一共出现了100次，所以world这个单词得分就更高。</p><p>那么匹配world的doc得分就越高,越有可能排在搜索结果前面。</p><p>Field-length norm：field长度，field越长，相关度越弱<br> 搜索请求：hello world</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code>doc1：{ &quot;title&quot;: &quot;hello article&quot;, &quot;content&quot;: &quot;...... N个单词&quot; }
doc2：{ &quot;title&quot;: &quot;my article&quot;, &quot;content&quot;: &quot;...... N个单词，hi world&quot; }

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>hello world在整个index中出现的次数是一样多的，那么doc1更相关，title field更短</p><p><strong>2.空间向量模型（vector space model）</strong></p><p>每个doc vector计算出对query vector的弧度，最后基于这个弧度给出一个doc相对于query中多个term的总分数</p><p>弧度越大，分数月底; 弧度越小，分数越高</p><p>如果是多个term，那么就是线性代数来计算，无法用图表示</p><figure><img src="/assets/img_120-tBpf_k21.png" alt="img_120.png" tabindex="0" loading="lazy"><figcaption>img_120.png</figcaption></figure><p>了解即可，掌握对应的打分算法我自己认为就足够了，不用砖牛角尖</p><h2 id="三、elasticsearch架构设计" tabindex="-1"><a class="header-anchor" href="#三、elasticsearch架构设计"><span>三、ElasticSearch架构设计</span></a></h2><p>es集群架构</p><p>如下图 ，就是一个三个节点组成的es集群，p0、p1、p2表示一个节点中的分片，R0、R1、R2表示分片对应的副本<br><img src="/assets/img_121-D-MusZIW.png" alt="img_121.png" loading="lazy"><br> 在Elasticsearch主要分成两类节点，一类是Master，一类是DataNode。</p><h3 id="_1-master节点" tabindex="-1"><a class="header-anchor" href="#_1-master节点"><span>1.Master节点</span></a></h3><p>在Elasticsearch启动时，会选举出来一个Master节点。</p><p>当某个节点启动后，然后使用Zen Discovery机制找到集群中的其他节点，并建立连接。</p><p>discovery.seed_hosts: [“192.168.21.130”, “192.168.21.131”, “192.168.21.132”]</p><p>并从候选主节点中选举出一个主节点。</p><p>cluster.initial_master_nodes: [“node1”, “node2”,“node3”]</p><p>Master节点主要负责</p><ul><li>管理索引（创建索引、删除索引）、分配分片</li><li>维护元数据</li><li>管理集群节点状态</li><li>不负责数据写入和查询，比较轻量级</li></ul><p>一个Elasticsearch集群中，只有一个Master节点。在生产环境中，内存可以相对小一点，但机器要稳定。</p><h3 id="_2-datanode节点" tabindex="-1"><a class="header-anchor" href="#_2-datanode节点"><span>2.DataNode节点</span></a></h3><p>在Elasticsearch集群中，会有N个DataNode节点。</p><p>DataNode节点主要负责：</p><p>数据写入、数据检索，</p><p>大部分Elasticsearch的压力都在DataNode节点上在生产环境中，内存最好配置大一些</p><h3 id="_3-分片" tabindex="-1"><a class="header-anchor" href="#_3-分片"><span>3.分片</span></a></h3><p>Elasticsearch是一个分布式的搜索引擎，索引的数据也是分成若干部分，分布在不同的服务器节点中，分布在不同服务器节点中的索引数据，就是分片（Shard）。</p><p>Elasticsearch会自动管理分片，如果发现分片分布不均衡，就会自动迁移一个索引（index）由多个shard（分片）组成，而分片是分布在不同的服务器上的.</p><h3 id="_4-副本" tabindex="-1"><a class="header-anchor" href="#_4-副本"><span>4.副本</span></a></h3><p>为了对Elasticsearch的分片进行容错，假设某个节点不可用，会导致整个索引库都将不可用。所以，需要对分片进行副本容错，每一个分片都会有对应的副本。</p><p>在Elasticsearch中，默认创建的索引为1个分片、每个分片有1个主分片和1个副本分片。</p><p>每个分片都会有一个Primary Shard（主分片），也会有若干个Replica Shard（副本分片）</p><p>Primary Shard和Replica Shard不在同一个节点上</p><h3 id="_5-es集群读写流程" tabindex="-1"><a class="header-anchor" href="#_5-es集群读写流程"><span>5.es集群读写流程</span></a></h3><p>es 写数据流程</p><figure><img src="/assets/img_122-BomucrqL.png" alt="img_122.png" tabindex="0" loading="lazy"><figcaption>img_122.png</figcaption></figure><p>1.选择任意一个DataNode发送请求，例如：node2。此时，node2就成为一个coordinating node（协调节点）</p><p>2.计算得到文档要写入的分片</p><p><code>shard = hash(routing) % number_of_primary_shards</code><br> routing 是一个可变值，默认是文档的 _id</p><p>3.coordinating node会进行路由，将请求转发给对应的primary shard所在的DataNode（假设primary shard在node1、replica shard在node2）</p><p>4.node1节点上的Primary Shard处理请求，写入数据到索引库中，并将数据同步到Replica shard</p><p>5.Primary Shard和Replica Shard都保存好了文档，返回client</p><p>es 读数据流程</p><figure><img src="/assets/img_123-CleYQ1lO.png" alt="img_123.png" tabindex="0" loading="lazy"><figcaption>img_123.png</figcaption></figure><p>1.client发起查询请求，某个DataNode接收到请求，该DataNode就会成为协调节点（Coordinating Node）</p><p>2.协调节点（Coordinating Node）将查询请求广播到每一个数据节点，这些数据节点的分片会处理该查询请求</p><p>3.每个分片进行数据查询，将符合条件的数据放在一个优先队列中，并将这些数据的文档ID、节点信息、分片信息返回给协调节点</p><p>4.协调节点将所有的结果进行汇总，并进行全局排序</p><p>5.协调节点向包含这些文档ID的分片发送get请求，对应的分片将文档数据返回给协调节点，最后协调节点将数据返回给客户端</p><p>注意：写请求是写入 primary shard，然后同步给所有的 replica shard；读请求可以从 primary shard 或 replica shard 读取，采用的是随机轮询算法。</p><p>自己总结：es的检索流程和mysql数据表查询非主键索引的思路有些相似，先从索引表查询出对应的主键索引值，在进行回表查询具体的行数据。</p><p>es删除/更新数据底层原理</p><p>如果是删除操作，commit 的时候会生成一个 .del 文件，里面将某个 doc 标识为 deleted 状态，那么搜索的时候根据 .del 文件就知道这个 doc 是否被删除了。</p><p>如果是更新操作，就是将原来的 doc 标识为 deleted 状态，然后新写入一条数据。</p><p>es 底层写数据原理</p><figure><img src="/assets/img_124-DzbgQLVs.png" alt="img_124.png" tabindex="0" loading="lazy"><figcaption>img_124.png</figcaption></figure><p>简述：先写入内存 buffer，在 buffer 里的时候数据是搜索不到的；然后刷新到os cache中（同时将数据备份到translog日志文件），最后刷新到 segment file磁盘文件中</p><p>总结一下，数据先写入内存 buffer，然后每隔 1s，将数据 refresh 到 os cache，到了 os cache 数据就能被搜索到（所以我们才说 es 从写入到能被搜索到，中间有 1s 的延迟）。每隔 5s，将数据写入 translog 文件作备份（这样如果机器宕机，内存数据全没，最多会有 5s 的数据丢失），translog 大到一定程度，或者默认每隔 30mins，会触发 commit 操作，将缓冲区的数据都 flush 到 segment file 磁盘文件中。最后存入到commit point磁盘文件中。</p><p>refresh到文件系统缓存</p><p>当数据写入到ES分片时，会首先写入到内存中，然后通过内存的buffer生成一个segment，并刷到文件系统缓存中。</p><p>如果 buffer 快满了，或者到一定时间，就会将内存 buffer 数据 refresh 到一个新的 segment file中，但是此时数据不是直接进入 segment file 磁盘文件，而是先进入 os cache 。</p><p>这个过程就是 refresh 。</p><p>只要 buffer 中的数据被 refresh 操作刷入 os cache 中，这个数据就可以被搜索到了。</p><p>定时 refresh到文件系统缓存机制</p><p>每隔 1 秒钟，es 将 buffer 中的数据写入一个新的 segment file ，每秒钟会产生一个新的磁盘文件 segment file ，这个 segment file 中就存储最近 1 秒内 buffer 中写入的数据。<br> 但是如果 buffer 里面此时没有数据，那当然不会执行 refresh 操作，如果 buffer 里面有数据，默认 1 秒钟执行一次 refresh 操作，刷入一个新的 segment file 中。</p><p>segment file合并</p><p>buffer 每 refresh 一次，就会产生一个 segment file ，所以默认情况下是 1 秒钟一个 segment file ，这样下来 segment file 会越来越多，此时会定期执行 merge，减少索引查询时IO开销。<br> 每次 merge 的时候，会将多个 segment file 合并成一个，同时这里会将标识为 deleted 的 doc 给物理删除掉（之前执行过的delete的数据），然后将新的 segment file 写入到一个 commit point磁盘 。</p><p>知识扩展</p><p>操作系统里面，磁盘文件其实都有一个东西，叫做 os cache ，即操作系统缓存，就是说数据写入磁盘文件之前，会先进入 os cache ，先进入操作系统级别的一个内存缓存中去。</p><p>备份到translog磁盘</p><p>刷新到translog文件以保障数据不丢失，translog的设计思想和mysql的redo log是相似的。</p><p>每隔5s,从os cache 中同步到translog磁盘里面去做备份。</p><p>那么translog 日志文件的作用是什么？</p><p>你执行 commit 操作之前，数据要么是停留在 buffer 中，要么是停留在 os cache 中，无论是 buffer 还是 os cache 都是内存，一旦这台机器死了，内存中的数据就全丢了。所以需要将数据对应的操作写入一个专门的日志文件 translog 中，一旦此时机器宕机，再次重启的时候，es 会自动读取 translog 日志文件中的数据，恢复到内存 buffer 和 os cache 中去。</p><p>flush到磁盘文件</p><p>重复上面的步骤，新的数据不断进入 buffer 和 translog，不断将 buffer 数据写入一个又一个新的 segment file文件系统缓存中去，每次 refresh 完 buffer 清空，translog 保留。随着这个过程推进，translog 会变得越来越大。当 translog 达到一定长度的时候，就会触发 commit 操作。</p><p>数据最终被flush到磁盘文件就完成了数据的最终归宿。</p><figure><img src="/assets/img_125-ByAMiA0z.png" alt="img_125.png" tabindex="0" loading="lazy"><figcaption>img_125.png</figcaption></figure><p>commit操作流程</p><p>commit 操作首先就是将 buffer 中现有数据 refresh 到 os cache 中去，清空 buffer。<br> 然后，将一个 commit point 写入磁盘文件，里面标识着这个 commit point 对应的所有 segment file ，同时强行将 os cache 中目前所有的数据都 fsync 到磁盘文件中去。<br> 最后清空 现有 translog 日志文件，重启一个 translog，此时 commit 操作完成。</p><p>这个 commit 操作叫做 flush 。</p><p>默认 30 分钟自动执行一次 flush ，将文件系统缓存的数据刷入到磁盘。<br> 但如果 translog 过大，也会触发 flush 。</p><p>flush 操作就对应着 commit 的全过程，我们可以通过 es api，手动执行 flush 操作，手动将 os cache 中的数据 fsync 强刷到磁盘上去。</p><p>es准实时机制</p><p>为什么叫 es 是准实时的？</p><p>NRT ，全称 near real-time 。默认是每隔 1 秒 refresh 一次的，所以 es 是准实时的，因为写入的数据 1 秒之后才能被看到。</p><p>可以通过 es 的 restful api 或者 java api ，手动执行一次 refresh 操作，就是手动将 buffer 中的数据刷入 os cache 中，让数据立马就可以被搜索到。只要数据被输入 os cache 中，buffer 就会被清空了，因为不需要保留 buffer 了，数据在 translog 里面已经持久化到磁盘去一份了。</p><p>es会数据丢失吗？</p><p>可能会丢失有 5 秒的数据，停留在 buffer、translog os cache、segment file os cache 中，而不在磁盘上，此时如果备份到translog过程中宕机，会导致 5 秒的数据丢失。</p><p>translog 其实也是先写入 os cache 的，默认每隔 5 秒刷一次到磁盘中去，所以默认情况下，可能有 5 秒的数据会仅仅停留在 buffer 或者 translog 文件的 os cache 中，如果此时机器挂了，会丢失 5 秒钟的数据。但是这样性能比较好，最多丢 5 秒的数据。<br> 也可以将 translog 设置成每次写操作必须是直接 fsync 到磁盘，但是性能会差很多。</p><p>es集群脑裂</p><p>关于集群脑裂的定义请参考我的另一篇博文</p><p><a href="https://blog.csdn.net/sinat_34814635/article/details/129914369" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/sinat_34814635/article/details/129914369<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>那么es是如何解决脑裂问题的？</p><p>es是直到有足够的master候选节点时，才可以选举出一个master，否则就不要选举出一个master。</p><p>这个参数必须被设置为集群中master候选节点的quorum数量，也就是大多数，至于quorum的算法，就是：master候选节点数量 / 2 + 1。</p><p>综上所述，一个生产环境的es集群，至少要有3个节点，同时将这个参数设置为quorum，也就是2。discovery.zen.minimum_master_nodes设置为2</p><p>那么这个是参数是如何避免脑裂问题的产生的呢？比如我们有3个节点，quorum是2.现在网络故障，1个节点在一个网络区域，另外2个节点在另外一个网络区域，不同的网络区域内无法通信。</p><p>这个时候有两种情况情况：</p><p>（1）如果master是单独的那个节点，另外2个节点是master候选节点，那么此时那个单独的master节点因为没有指定数量的候选master node在自己当前所在的集群内，因此就会取消当前master的角色，尝试重新选举，但是无法选举成功。然后另外一个网络区域内的node因为无法连接到master，就会发起重新选举，因为有两个master候选节点，满足了quorum，因此可以成功选举出一个master。此时集群中就会还是只有一个master。</p><p>（2）如果master和另外一个node在一个网络区域内，然后一个node单独在一个网络区域内。那么此时那个单独的node因为连接不上master，会尝试发起选举，但是因为master候选节点数量不到quorum，因此无法选举出master。而另外一个网络区域内，原先的那个master还会继续工作。这也可以保证集群内只有一个master节点。</p><p>综上所述，集群中master节点的数量至少3台，三台主节点通过在elasticsearch.yml中配置discovery.zen.minimum_master_nodes: 2，就可以避免脑裂问题的产生。</p><h2 id="四、elasticsearch应用" tabindex="-1"><a class="header-anchor" href="#四、elasticsearch应用"><span>四、ElasticSearch应用</span></a></h2><h3 id="_1-elasticsearch-sql" tabindex="-1"><a class="header-anchor" href="#_1-elasticsearch-sql"><span>1.Elasticsearch SQL</span></a></h3><figure><img src="/assets/img_126-B-jpiGHs.png" alt="img_126.png" tabindex="0" loading="lazy"><figcaption>img_126.png</figcaption></figure><p>Elasticsearch SQL允许执行类SQL的查询，可以使用REST接口、命令行或者是JDBC，都可以使用SQL来进行数据的检索和数据的聚合。</p><p>Elasticsearch SQL特点：</p><p>本地集成</p><p>Elasticsearch SQL是专门为Elasticsearch构建的。每个SQL查询都根据底层存储对相关节点有效执行。</p><p>没有额外的要求</p><p>不依赖其他的硬件、进程、运行时库，Elasticsearch SQL可以直接运行在Elasticsearch集群上</p><p>轻量且高效</p><p>像SQL那样简洁、高效地完成查询</p><p>Elasticsearch SQL提供了sql转换的功能，但是只能满足一些简单的查询，例如：不支持JOIN、不支持较复杂的子查询。官方还是推荐使用DSL语句来实现</p><h3 id="_2-java客户端" tabindex="-1"><a class="header-anchor" href="#_2-java客户端"><span>2.Java客户端</span></a></h3><p>这个就自己看官网吧</p><h3 id="_3-es和mysql的双写" tabindex="-1"><a class="header-anchor" href="#_3-es和mysql的双写"><span>3.es和mysql的双写</span></a></h3><p>双写的流程：</p><ul><li>1.先写数据库，然后写es，es只存常搜索的索引字段。</li><li>2.读取时先读es，找到对应主键后，然后根据主键在读mysql。（这种场景主要出现在mysql是分表的，而主键配置的是分片键，非分片键的查询将扫描全表）<br> 首先不建议进行双写，因为会造成数据不一致这样新的问题。造成不一致的原因为写入es或者更新es字段失败，加上补充机制后也没有成功。</li></ul><p>双写的同步</p><p>分页查询mysql中的数据，放入mq中（放入mq中的原因，为读取mysql的线程会远比执行同步的线程速度快），同步线程从mq中拉起数据，然后和es对比，如果不同，与mysql中的数据为准，进行删除复制。</p><p>补偿机制</p><p>我认为任何对es写失败，更新失败，删除失败都应该纪录下来，然后去手动操作使其同步。</p><h2 id="五、elasticsearch安装配置" tabindex="-1"><a class="header-anchor" href="#五、elasticsearch安装配置"><span>五、ElasticSearch安装配置</span></a></h2><h3 id="_1-安装elasticsearch" tabindex="-1"><a class="header-anchor" href="#_1-安装elasticsearch"><span>1.安装ElasticSearch</span></a></h3><p>解压下载的压缩包，本次使用7.14.0版本</p><p>从v7开始，elasticsearch不用单独安装JDK，因为它在下载时会自动下载对应的jdk包。因此不用额外下载jdk和配置环境变量。</p><p>在终端cd到elasticsearch的bin目录，运行命令./elasticsearch即可开启es数据库服务（在终端通过按control + c可停止服务）。在网页中访问localhost:9200看到json结果即启动成功。</p><p>如下图所示：</p><figure><img src="/assets/img_127-DPc1sRVK.png" alt="img_127.png" tabindex="0" loading="lazy"><figcaption>img_127.png</figcaption></figure><h3 id="_2-安装kibana" tabindex="-1"><a class="header-anchor" href="#_2-安装kibana"><span>2.安装Kibana</span></a></h3><p>下载可视化工具Kibanahttps://www.elastic.co/cn/downloads/kibana</p><p>解压下载的压缩包，并将其复制粘贴至自己想要存放的目录。Kibana的版本最好和es保持一致，如这次同样使用7.14.0版本</p><p>启动Kibana</p><p>在终端cd到Kibana目录下，运行命令./Kibana即可开启Kibana的端口访问。在网页中访问http://localhost:5601跳转到如下界面即访问成功。</p><p>访问下面地址：<a href="http://localhost:5601/app/dev_tools#/console" target="_blank" rel="noopener noreferrer">http://localhost:5601/app/dev_tools#/console<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 可进入管理后台</p><figure><img src="/assets/img_128-CP0IE-_S.png" alt="img_128.png" tabindex="0" loading="lazy"><figcaption>img_128.png</figcaption></figure><p>ElasticSearch可视化工具之cerebro</p></div><!--[--><div style="text-align:center;"><h4>公众号更有货，推荐关注！</h4><img src="https://ujava.cn/logo/gzh-wz.png"></div><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/assembly/dubbo.html" aria-label="组件Dubbo"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>组件Dubbo</div></a><a class="route-link nav-link next" href="/assembly/erp.html" aria-label="组件ERP"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">组件ERP<span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2024 UJava </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CMWvZbP3.js" defer></script>
  </body>
</html>
