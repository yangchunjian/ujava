<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.1" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://ujava.cn/highfreq/elasticsearch.html"><meta property="og:site_name" content="UJava"><meta property="og:title" content="ElasticSearchæ¶æ„è®¾è®¡"><meta property="og:description" content="ç®€ä»‹ Elasticsearch æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å¯æ‰©å±•çš„å®æ—¶æœç´¢å’Œåˆ†æå¼•æ“,ä¸€ä¸ªå»ºç«‹åœ¨å…¨æ–‡æœç´¢å¼•æ“ Apache Luceneâ„¢ åŸºç¡€ä¸Šçš„æœç´¢å¼•æ“.å½“ç„¶ Elasticsearch å¹¶ä¸ä»…ä»…æ˜¯ Lucene é‚£ä¹ˆç®€å•ï¼Œå®ƒä¸ä»…åŒ…æ‹¬äº†å…¨æ–‡æœç´¢åŠŸèƒ½ï¼Œè¿˜å¯ä»¥è¿›è¡Œä»¥ä¸‹å·¥ä½œ: ä¸€ä¸ªåˆ†å¸ƒå¼çš„å®æ—¶æ–‡æ¡£å­˜å‚¨ï¼Œæ¯ä¸ªå­—æ®µå¯ä»¥è¢«ç´¢å¼•ä¸æœç´¢ ä¸€ä¸ªåˆ†å¸ƒå¼å®æ—¶åˆ†ææœç´¢å¼•æ“ èƒ½èƒœä»»ä¸Šç™¾ä¸ªæœåŠ¡èŠ‚ç‚¹çš„æ‰©å±•ï¼Œå¹¶æ”¯æŒ PB çº§åˆ«çš„ç»“æ„åŒ–æˆ–è€…éç»“æ„åŒ–æ•°æ® 1.ESæ¦‚è§ˆ 1.ESä¼˜ç‚¹ 1.æ”¯æŒå…¨æ–‡æœç´¢ï¼Œå¹¶åŸºäºå€’æ’ç´¢å¼•ï¼Œæ£€ç´¢é€Ÿåº¦ç‰¹åˆ«å¿« 2.é«˜å¯ç”¨æ€§ï¼Œæ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œä»»ä½•èŠ‚ç‚¹å¤±æ•ˆç³»ç»Ÿè‡ªåŠ¨è°ƒæ•´ã€‚"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-04-10T08:52:36.000Z"><meta property="article:author" content="UJava"><meta property="article:tag" content="é«˜é¢‘"><meta property="article:modified_time" content="2024-04-10T08:52:36.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ElasticSearchæ¶æ„è®¾è®¡","image":[""],"dateModified":"2024-04-10T08:52:36.000Z","author":[{"@type":"Person","name":"UJava","url":"https://ujava.cn/article/"}]}</script><meta name="robots" content="all"><meta name="author" content="ujava"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="keywords" content="JavaåŸºç¡€, å¤šçº¿ç¨‹, JVM, è™šæ‹Ÿæœº, æ•°æ®åº“, MySQL, Spring, Redis, MyBatis, ç³»ç»Ÿè®¾è®¡, åˆ†å¸ƒå¼, RPC, é«˜å¯ç”¨, é«˜å¹¶å‘"><meta name="apple-mobile-web-app-capable" content="yes"><script>var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?d44ac18afe199d84cbb99448b4b9baec";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();</script><link rel="alternate" type="application/atom+xml" href="https://ujava.cn/atom.xml" title="UJava Atom Feed"><link rel="alternate" type="application/json" href="https://ujava.cn/feed.json" title="UJava JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://ujava.cn/rss.xml" title="UJava RSS Feed"><link rel="icon" href="/favicon.ico"><title>ElasticSearchæ¶æ„è®¾è®¡ | UJava</title><meta name="description" content="ç®€ä»‹ Elasticsearch æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å¯æ‰©å±•çš„å®æ—¶æœç´¢å’Œåˆ†æå¼•æ“,ä¸€ä¸ªå»ºç«‹åœ¨å…¨æ–‡æœç´¢å¼•æ“ Apache Luceneâ„¢ åŸºç¡€ä¸Šçš„æœç´¢å¼•æ“.å½“ç„¶ Elasticsearch å¹¶ä¸ä»…ä»…æ˜¯ Lucene é‚£ä¹ˆç®€å•ï¼Œå®ƒä¸ä»…åŒ…æ‹¬äº†å…¨æ–‡æœç´¢åŠŸèƒ½ï¼Œè¿˜å¯ä»¥è¿›è¡Œä»¥ä¸‹å·¥ä½œ: ä¸€ä¸ªåˆ†å¸ƒå¼çš„å®æ—¶æ–‡æ¡£å­˜å‚¨ï¼Œæ¯ä¸ªå­—æ®µå¯ä»¥è¢«ç´¢å¼•ä¸æœç´¢ ä¸€ä¸ªåˆ†å¸ƒå¼å®æ—¶åˆ†ææœç´¢å¼•æ“ èƒ½èƒœä»»ä¸Šç™¾ä¸ªæœåŠ¡èŠ‚ç‚¹çš„æ‰©å±•ï¼Œå¹¶æ”¯æŒ PB çº§åˆ«çš„ç»“æ„åŒ–æˆ–è€…éç»“æ„åŒ–æ•°æ® 1.ESæ¦‚è§ˆ 1.ESä¼˜ç‚¹ 1.æ”¯æŒå…¨æ–‡æœç´¢ï¼Œå¹¶åŸºäºå€’æ’ç´¢å¼•ï¼Œæ£€ç´¢é€Ÿåº¦ç‰¹åˆ«å¿« 2.é«˜å¯ç”¨æ€§ï¼Œæ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œä»»ä½•èŠ‚ç‚¹å¤±æ•ˆç³»ç»Ÿè‡ªåŠ¨è°ƒæ•´ã€‚">
    <link rel="preload" href="/assets/style-JZCuSqCM.css" as="style"><link rel="stylesheet" href="/assets/style-JZCuSqCM.css">
    <link rel="modulepreload" href="/assets/app-I9ix_QCV.js"><link rel="modulepreload" href="/assets/elasticsearch.html-w7TsvmOw.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-x3n3nnut.js"><link rel="modulepreload" href="/assets/elasticsearch.html-VIcFr0Yi.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/logo/logo.svg" alt="UJava"><!----><span class="vp-site-name hide-in-pad">UJava</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="å¿«é€Ÿä¸Šæ‰‹" class="vp-link nav-link nav-link" href="/required/"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>å¿«é€Ÿä¸Šæ‰‹<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="è®¾è®¡æ€æƒ³" class="vp-link nav-link nav-link" href="/mind/"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>è®¾è®¡æ€æƒ³<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="è®¾è®¡æ¨¡å¼" class="vp-link nav-link nav-link" href="/design/"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>è®¾è®¡æ¨¡å¼<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ç½‘ç«™ç›¸å…³"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>ç½‘ç«™ç›¸å…³</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="å…³äºä½œè€…" class="vp-link nav-link nav-link" href="/author/"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span>å…³äºä½œè€…<!----></a></li><li class="dropdown-item"><a aria-label="æ›´æ–°å†å²" class="vp-link nav-link nav-link" href="/timeline/"><span class="font-icon icon fa-fw fa-sm fas fa-history" style=""></span>æ›´æ–°å†å²<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">å¿…è¯»</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">è®¾è®¡æ€æƒ³</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">è®¾è®¡åŸç†</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">è®¾è®¡æ¨¡å¼</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">è®¾è®¡è§„èŒƒ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">è®¾è®¡æ¡†æ¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">è®¾è®¡é«˜é¢‘</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="è®¾è®¡é«˜é¢‘" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡é«˜é¢‘<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="DevOpsåŸºæœ¬æ¦‚å¿µ" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/devops.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>DevOpsåŸºæœ¬æ¦‚å¿µ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ElasticSearchæ¶æ„è®¾è®¡" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/highfreq/elasticsearch.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ElasticSearchæ¶æ„è®¾è®¡<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="ç®€ä»‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#ç®€ä»‹"><!---->ç®€ä»‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="1.ESæ¦‚è§ˆ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-esæ¦‚è§ˆ"><!---->1.ESæ¦‚è§ˆ<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.ESä¼˜ç‚¹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-esä¼˜ç‚¹"><!---->1.ESä¼˜ç‚¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.ESç¼ºç‚¹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-esç¼ºç‚¹"><!---->2.ESç¼ºç‚¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.ESä½¿ç”¨åœºæ™¯" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_3-esä½¿ç”¨åœºæ™¯"><!---->3.ESä½¿ç”¨åœºæ™¯<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.DSLè¯­è¨€é«˜çº§æŸ¥è¯¢" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-dslè¯­è¨€é«˜çº§æŸ¥è¯¢"><!---->2.DSLè¯­è¨€é«˜çº§æŸ¥è¯¢<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.èšåˆæœç´¢" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_4-èšåˆæœç´¢"><!---->4.èšåˆæœç´¢<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.æ–‡æ¡£æ˜ å°„" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_3-æ–‡æ¡£æ˜ å°„"><!---->3.æ–‡æ¡£æ˜ å°„<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.åŠ¨æ€æ˜ å°„" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-åŠ¨æ€æ˜ å°„"><!---->1.åŠ¨æ€æ˜ å°„<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.é™æ€æ˜ å°„" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-é™æ€æ˜ å°„"><!---->2.é™æ€æ˜ å°„<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.æ ¸å¿ƒç±»å‹ï¼ˆCore datatypeï¼‰" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_3-æ ¸å¿ƒç±»å‹-core-datatype"><!---->3.æ ¸å¿ƒç±»å‹ï¼ˆCore datatypeï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.æ•°æ®å»ºæ¨¡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_4-æ•°æ®å»ºæ¨¡"><!---->4.æ•°æ®å»ºæ¨¡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.åˆ†é¡µæŸ¥è¯¢" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_5-åˆ†é¡µæŸ¥è¯¢"><!---->5.åˆ†é¡µæŸ¥è¯¢<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.è¯­æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-è¯­æ³•"><!---->1.è¯­æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.scrollè§£å†³æ·±åˆ†é¡µé—®é¢˜" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-scrollè§£å†³æ·±åˆ†é¡µé—®é¢˜"><!---->2.scrollè§£å†³æ·±åˆ†é¡µé—®é¢˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="6.suggest search" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_6-suggest-search"><!---->6.suggest search<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="äºŒã€ESæ ¸å¿ƒåŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#äºŒã€esæ ¸å¿ƒåŸç†"><!---->äºŒã€ESæ ¸å¿ƒåŸç†<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.ESå­˜å‚¨æ¨¡å‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-eså­˜å‚¨æ¨¡å‹"><!---->1.ESå­˜å‚¨æ¨¡å‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="1.ç´¢å¼•ï¼ˆIndexï¼‰" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-ç´¢å¼•-index"><!---->1.ç´¢å¼•ï¼ˆIndexï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.æ–‡æ¡£ç±»å‹ï¼ˆTypeï¼‰" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-æ–‡æ¡£ç±»å‹-type"><!---->2.æ–‡æ¡£ç±»å‹ï¼ˆTypeï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.æ–‡æ¡£ï¼ˆDocumentï¼‰" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_3-æ–‡æ¡£-document"><!---->3.æ–‡æ¡£ï¼ˆDocumentï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.å­—æ®µï¼ˆFieldï¼‰" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_4-å­—æ®µ-field"><!---->4.å­—æ®µï¼ˆFieldï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.å€’æ’ç´¢å¼•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-å€’æ’ç´¢å¼•"><!---->2.å€’æ’ç´¢å¼•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.åˆ†è¯å™¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_3-åˆ†è¯å™¨"><!---->3.åˆ†è¯å™¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.esè¯„åˆ†æœºåˆ¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_4-esè¯„åˆ†æœºåˆ¶"><!---->4.esè¯„åˆ†æœºåˆ¶<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.æ‰“åˆ†ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-æ‰“åˆ†ç®—æ³•"><!---->1.æ‰“åˆ†ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="æ€»å…¬å¼" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#æ€»å…¬å¼"><!---->æ€»å…¬å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="1.TFç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-tfç®—æ³•"><!---->1.TFç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ä¸‰ã€ElasticSearchæ¶æ„è®¾è®¡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#ä¸‰ã€elasticsearchæ¶æ„è®¾è®¡"><!---->ä¸‰ã€ElasticSearchæ¶æ„è®¾è®¡<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.esé›†ç¾¤æ¶æ„" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-esé›†ç¾¤æ¶æ„"><!---->1.esé›†ç¾¤æ¶æ„<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="1.MasterèŠ‚ç‚¹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-masterèŠ‚ç‚¹"><!---->1.MasterèŠ‚ç‚¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.DataNodeèŠ‚ç‚¹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-datanodeèŠ‚ç‚¹"><!---->2.DataNodeèŠ‚ç‚¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.åˆ†ç‰‡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_3-åˆ†ç‰‡"><!---->3.åˆ†ç‰‡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.å‰¯æœ¬" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_4-å‰¯æœ¬"><!---->4.å‰¯æœ¬<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.esé›†ç¾¤è¯»å†™æµç¨‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-esé›†ç¾¤è¯»å†™æµç¨‹"><!---->2.esé›†ç¾¤è¯»å†™æµç¨‹<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.es å†™æ•°æ®æµç¨‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-es-å†™æ•°æ®æµç¨‹"><!---->1.es å†™æ•°æ®æµç¨‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.es è¯»æ•°æ®æµç¨‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-es-è¯»æ•°æ®æµç¨‹"><!---->2.es è¯»æ•°æ®æµç¨‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.esåˆ é™¤/æ›´æ–°æ•°æ®åº•å±‚åŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_3-esåˆ é™¤-æ›´æ–°æ•°æ®åº•å±‚åŸç†"><!---->3.esåˆ é™¤/æ›´æ–°æ•°æ®åº•å±‚åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.es åº•å±‚å†™æ•°æ®åŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_3-es-åº•å±‚å†™æ•°æ®åŸç†"><!---->3.es åº•å±‚å†™æ•°æ®åŸç†<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.refreshåˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-refreshåˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜"><!---->1.refreshåˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.å¤‡ä»½åˆ°translogç£ç›˜" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-å¤‡ä»½åˆ°translogç£ç›˜"><!---->2.å¤‡ä»½åˆ°translogç£ç›˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.flushåˆ°ç£ç›˜æ–‡ä»¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_3-flushåˆ°ç£ç›˜æ–‡ä»¶"><!---->3.flushåˆ°ç£ç›˜æ–‡ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.eså‡†å®æ—¶æœºåˆ¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_4-eså‡†å®æ—¶æœºåˆ¶"><!---->4.eså‡†å®æ—¶æœºåˆ¶<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.ä¸ºä»€ä¹ˆå« es æ˜¯å‡†å®æ—¶çš„ï¼Ÿ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-ä¸ºä»€ä¹ˆå«-es-æ˜¯å‡†å®æ—¶çš„"><!---->1.ä¸ºä»€ä¹ˆå« es æ˜¯å‡†å®æ—¶çš„ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.esä¼šæ•°æ®ä¸¢å¤±å—ï¼Ÿ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-esä¼šæ•°æ®ä¸¢å¤±å—"><!---->2.esä¼šæ•°æ®ä¸¢å¤±å—ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.esé›†ç¾¤è„‘è£‚" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_5-esé›†ç¾¤è„‘è£‚"><!---->5.esé›†ç¾¤è„‘è£‚<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å››ã€ElasticSearchåº”ç”¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#å››ã€elasticsearchåº”ç”¨"><!---->å››ã€ElasticSearchåº”ç”¨<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.Elasticsearch SQL" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-elasticsearch-sql"><!---->1.Elasticsearch SQL<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.Javaå®¢æˆ·ç«¯" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-javaå®¢æˆ·ç«¯"><!---->2.Javaå®¢æˆ·ç«¯<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.1 eså’Œmysqlçš„åŒå†™" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_4-1-eså’Œmysqlçš„åŒå†™"><!---->4.1 eså’Œmysqlçš„åŒå†™<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="äº”ã€ElasticSearchå®‰è£…é…ç½®" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#äº”ã€elasticsearchå®‰è£…é…ç½®"><!---->äº”ã€ElasticSearchå®‰è£…é…ç½®<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.å®‰è£…ElasticSearch" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_1-å®‰è£…elasticsearch"><!---->1.å®‰è£…ElasticSearch<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.å®‰è£…Kibana" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/highfreq/elasticsearch.html#_2-å®‰è£…kibana"><!---->2.å®‰è£…Kibana<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a aria-label="Jenkinsè¯¦è§£" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/jenkins.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>Jenkinsè¯¦è§£<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="K8Sç®€ä»‹" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/k8s.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>K8Sç®€ä»‹<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Mockå•æµ‹æ–¹å¼" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/mock.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>Mockå•æµ‹æ–¹å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Reactoræ¨¡å‹è¯¦è§£" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/reactor.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>Reactoræ¨¡å‹è¯¦è§£<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="SpringCloudè¯¦è§£" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/springcloud.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>SpringCloudè¯¦è§£<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="WebFluxè¯¦è§£" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/webflux.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>WebFluxè¯¦è§£<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ä¸€æ–‡ææ‡‚ä¸šåŠ¡æ¶æ„ã€æŠ€æœ¯æ¶æ„ã€æ•°æ®æ¶æ„ã€è¿ç»´æ¶æ„ã€ç‰©ç†æ¶æ„ç†æ¸…ä¸åŒè§†è§’çš„æ¶æ„" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/business.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ä¸€æ–‡ææ‡‚ä¸šåŠ¡æ¶æ„ã€æŠ€æœ¯æ¶æ„ã€æ•°æ®æ¶æ„ã€è¿ç»´æ¶æ„ã€ç‰©ç†æ¶æ„ç†æ¸…ä¸åŒè§†è§’çš„æ¶æ„<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ä¸€è‡´æ€§Hashç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/hash.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ä¸€è‡´æ€§Hashç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ä»€ä¹ˆæ˜¯serverless" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/serverless.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ä»€ä¹ˆæ˜¯serverless<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ä¼ä¸šæ¶æ„TOGAFå†…å®¹æ¡†æ¶" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/togaf.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ä¼ä¸šæ¶æ„TOGAFå†…å®¹æ¡†æ¶<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ä¼ä¸šçº§æ¶æ„å¸¦æ¥çš„æ¨¡å¼æ”¹å˜" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/modelchange.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ä¼ä¸šçº§æ¶æ„å¸¦æ¥çš„æ¨¡å¼æ”¹å˜<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ä¼ä¸šçº§æ¶æ„å»ºæ¨¡ä¹‹æµ…è°ˆä¸‰å¤§æ¨¡å‹å…³ç³»" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/modelrelation.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ä¼ä¸šçº§æ¶æ„å»ºæ¨¡ä¹‹æµ…è°ˆä¸‰å¤§æ¨¡å‹å…³ç³»<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="å‡ ç§å¸¸è§webå®¹å™¨" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/container.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>å‡ ç§å¸¸è§webå®¹å™¨<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="å½±å“é¡¹ç›®çš„è¦ç´ åŠç»éªŒæ€»ç»“" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/effect.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>å½±å“é¡¹ç›®çš„è¦ç´ åŠç»éªŒæ€»ç»“<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="æ¦‚è¦è®¾è®¡å’Œè¯¦ç»†è®¾è®¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/summary.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>æ¦‚è¦è®¾è®¡å’Œè¯¦ç»†è®¾è®¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ç³»ç»Ÿæ€»ä½“ç»“æ„è®¾è®¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/overall.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ç³»ç»Ÿæ€»ä½“ç»“æ„è®¾è®¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ç³»ç»Ÿè®¾è®¡åŸåˆ™" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/design.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ç³»ç»Ÿè®¾è®¡åŸåˆ™<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡å®è·µç»éªŒ" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/experience.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡å®è·µç»éªŒ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡å®¹é”™" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/faulttolerant.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡å®¹é”™<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡æ•°æ®åº“ç´¢å¼•" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/databaseindex.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡æ•°æ®åº“ç´¢å¼•<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡æ—¶å¯ä½¿ç”¨çš„å·¥å…·" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/tool.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡æ—¶å¯ä½¿ç”¨çš„å·¥å…·<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡æ³¨æ„äº‹é¡¹ä¸€" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/attention1.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡æ³¨æ„äº‹é¡¹ä¸€<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡æ³¨æ„äº‹é¡¹äºŒ" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/attention2.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡æ³¨æ„äº‹é¡¹äºŒ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡ç¼“å­˜" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/cache.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡ç¼“å­˜<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡è€ƒé‡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/consider.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡è€ƒé‡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡é™æµ" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/highfreq/throttling.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>è®¾è®¡é™æµ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">è®¾è®¡ç®—æ³•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-star" style=""></span><span class="vp-sidebar-title">è®¾è®¡Java</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ElasticSearchæ¶æ„è®¾è®¡</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://ujava.cn/article/" target="_blank" rel="noopener noreferrer">UJava</a></span><span property="author" content="UJava"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-04-10T08:44:25.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 28 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT28M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category1 clickable" role="navigation">è®¾è®¡é«˜é¢‘</span><!--]--><meta property="articleSection" content="è®¾è®¡é«˜é¢‘"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag4 clickable" role="navigation">é«˜é¢‘</span><!--]--><meta property="keywords" content="é«˜é¢‘"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#ç®€ä»‹">ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_1-esæ¦‚è§ˆ">1.ESæ¦‚è§ˆ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-esä¼˜ç‚¹">1.ESä¼˜ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-esç¼ºç‚¹">2.ESç¼ºç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-esä½¿ç”¨åœºæ™¯">3.ESä½¿ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-dslè¯­è¨€é«˜çº§æŸ¥è¯¢">2.DSLè¯­è¨€é«˜çº§æŸ¥è¯¢</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-èšåˆæœç´¢">4.èšåˆæœç´¢</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_3-æ–‡æ¡£æ˜ å°„">3.æ–‡æ¡£æ˜ å°„</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-åŠ¨æ€æ˜ å°„">1.åŠ¨æ€æ˜ å°„</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-é™æ€æ˜ å°„">2.é™æ€æ˜ å°„</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-æ ¸å¿ƒç±»å‹-core-datatype">3.æ ¸å¿ƒç±»å‹ï¼ˆCore datatypeï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_4-æ•°æ®å»ºæ¨¡">4.æ•°æ®å»ºæ¨¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_5-åˆ†é¡µæŸ¥è¯¢">5.åˆ†é¡µæŸ¥è¯¢</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-è¯­æ³•">1.è¯­æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-scrollè§£å†³æ·±åˆ†é¡µé—®é¢˜">2.scrollè§£å†³æ·±åˆ†é¡µé—®é¢˜</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_6-suggest-search">6.suggest search</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#äºŒã€esæ ¸å¿ƒåŸç†">äºŒã€ESæ ¸å¿ƒåŸç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-eså­˜å‚¨æ¨¡å‹">1.ESå­˜å‚¨æ¨¡å‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-ç´¢å¼•-index">1.ç´¢å¼•ï¼ˆIndexï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-æ–‡æ¡£ç±»å‹-type">2.æ–‡æ¡£ç±»å‹ï¼ˆTypeï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-æ–‡æ¡£-document">3.æ–‡æ¡£ï¼ˆDocumentï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-å­—æ®µ-field">4.å­—æ®µï¼ˆFieldï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-å€’æ’ç´¢å¼•">2.å€’æ’ç´¢å¼•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-åˆ†è¯å™¨">3.åˆ†è¯å™¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_4-esè¯„åˆ†æœºåˆ¶">4.esè¯„åˆ†æœºåˆ¶</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-æ‰“åˆ†ç®—æ³•">1.æ‰“åˆ†ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#æ€»å…¬å¼">æ€»å…¬å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-tfç®—æ³•">1.TFç®—æ³•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#ä¸‰ã€elasticsearchæ¶æ„è®¾è®¡">ä¸‰ã€ElasticSearchæ¶æ„è®¾è®¡</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-esé›†ç¾¤æ¶æ„">1.esé›†ç¾¤æ¶æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-masterèŠ‚ç‚¹">1.MasterèŠ‚ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-datanodeèŠ‚ç‚¹">2.DataNodeèŠ‚ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-åˆ†ç‰‡">3.åˆ†ç‰‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-å‰¯æœ¬">4.å‰¯æœ¬</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_2-esé›†ç¾¤è¯»å†™æµç¨‹">2.esé›†ç¾¤è¯»å†™æµç¨‹</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-es-å†™æ•°æ®æµç¨‹">1.es å†™æ•°æ®æµç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-es-è¯»æ•°æ®æµç¨‹">2.es è¯»æ•°æ®æµç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-esåˆ é™¤-æ›´æ–°æ•°æ®åº•å±‚åŸç†">3.esåˆ é™¤/æ›´æ–°æ•°æ®åº•å±‚åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_3-es-åº•å±‚å†™æ•°æ®åŸç†">3.es åº•å±‚å†™æ•°æ®åŸç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-refreshåˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜">1.refreshåˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-å¤‡ä»½åˆ°translogç£ç›˜">2.å¤‡ä»½åˆ°translogç£ç›˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-flushåˆ°ç£ç›˜æ–‡ä»¶">3.flushåˆ°ç£ç›˜æ–‡ä»¶</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_4-eså‡†å®æ—¶æœºåˆ¶">4.eså‡†å®æ—¶æœºåˆ¶</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-ä¸ºä»€ä¹ˆå«-es-æ˜¯å‡†å®æ—¶çš„">1.ä¸ºä»€ä¹ˆå« es æ˜¯å‡†å®æ—¶çš„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-esä¼šæ•°æ®ä¸¢å¤±å—">2.esä¼šæ•°æ®ä¸¢å¤±å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-esé›†ç¾¤è„‘è£‚">5.esé›†ç¾¤è„‘è£‚</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#å››ã€elasticsearchåº”ç”¨">å››ã€ElasticSearchåº”ç”¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-elasticsearch-sql">1.Elasticsearch SQL</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-javaå®¢æˆ·ç«¯">2.Javaå®¢æˆ·ç«¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-1-eså’Œmysqlçš„åŒå†™">4.1 eså’Œmysqlçš„åŒå†™</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#äº”ã€elasticsearchå®‰è£…é…ç½®">äº”ã€ElasticSearchå®‰è£…é…ç½®</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-å®‰è£…elasticsearch">1.å®‰è£…ElasticSearch</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-å®‰è£…kibana">2.å®‰è£…Kibana</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h2 id="ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹" aria-hidden="true">#</a> ç®€ä»‹</h2><p>Elasticsearch æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å¯æ‰©å±•çš„å®æ—¶æœç´¢å’Œåˆ†æå¼•æ“,ä¸€ä¸ªå»ºç«‹åœ¨å…¨æ–‡æœç´¢å¼•æ“ Apache Luceneâ„¢ åŸºç¡€ä¸Šçš„æœç´¢å¼•æ“.å½“ç„¶ Elasticsearch å¹¶ä¸ä»…ä»…æ˜¯ Lucene é‚£ä¹ˆç®€å•ï¼Œå®ƒä¸ä»…åŒ…æ‹¬äº†å…¨æ–‡æœç´¢åŠŸèƒ½ï¼Œè¿˜å¯ä»¥è¿›è¡Œä»¥ä¸‹å·¥ä½œ:</p><ul><li>ä¸€ä¸ªåˆ†å¸ƒå¼çš„å®æ—¶æ–‡æ¡£å­˜å‚¨ï¼Œæ¯ä¸ªå­—æ®µå¯ä»¥è¢«ç´¢å¼•ä¸æœç´¢</li><li>ä¸€ä¸ªåˆ†å¸ƒå¼å®æ—¶åˆ†ææœç´¢å¼•æ“</li><li>èƒ½èƒœä»»ä¸Šç™¾ä¸ªæœåŠ¡èŠ‚ç‚¹çš„æ‰©å±•ï¼Œå¹¶æ”¯æŒ PB çº§åˆ«çš„ç»“æ„åŒ–æˆ–è€…éç»“æ„åŒ–æ•°æ®</li></ul><h2 id="_1-esæ¦‚è§ˆ" tabindex="-1"><a class="header-anchor" href="#_1-esæ¦‚è§ˆ" aria-hidden="true">#</a> 1.ESæ¦‚è§ˆ</h2><h3 id="_1-esä¼˜ç‚¹" tabindex="-1"><a class="header-anchor" href="#_1-esä¼˜ç‚¹" aria-hidden="true">#</a> 1.ESä¼˜ç‚¹</h3><ul><li>1.æ”¯æŒå…¨æ–‡æœç´¢ï¼Œå¹¶åŸºäºå€’æ’ç´¢å¼•ï¼Œæ£€ç´¢é€Ÿåº¦ç‰¹åˆ«å¿«</li><li>2.é«˜å¯ç”¨æ€§ï¼Œæ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œä»»ä½•èŠ‚ç‚¹å¤±æ•ˆç³»ç»Ÿè‡ªåŠ¨è°ƒæ•´ã€‚</li></ul><h3 id="_2-esç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_2-esç¼ºç‚¹" aria-hidden="true">#</a> 2.ESç¼ºç‚¹</h3><ul><li>1.å¯¹ç¡¬ä»¶è¦æ±‚è¾ƒé«˜ï¼Œesæ¯”è¾ƒåƒå†…å­˜ï¼Œéœ€è¦å­˜å‚¨èµ„æºæ¥æ”¯æŒå¤§é‡æ•°æ®çš„å¤„ç†ã€‚</li><li>2.ä¸æ”¯æŒäº‹åŠ¡ç­‰ACIDå±æ€§ã€‚</li></ul><h3 id="_3-esä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_3-esä½¿ç”¨åœºæ™¯" aria-hidden="true">#</a> 3.ESä½¿ç”¨åœºæ™¯</h3><p>1.èŠå¤©æ¶ˆæ¯</p><ul><li>æ•°æ®é‡å¤§ï¼Œä¸šåŠ¡å…³ç³»ç®€å•ï¼Œä¼šé€šè¿‡å…³é”®å­—æœç´¢èŠå¤©ä¿¡æ¯</li><li>éæ ¸å¿ƒä¸šåŠ¡ï¼Œä¸ä¼šé¢‘ç¹crud</li><li>æ²¡æœ‰äº‹åŠ¡çš„åœºæ™¯ï¼Œå¯ä»¥ä¸ç”¨æ”¯æŒäº‹åŠ¡</li></ul><p>2.æ—¥å¿—çºªå½•</p><p>Elasticsearch ä¸€ä¸ªå…¸å‹åº”ç”¨å°±æ˜¯ ELK æ—¥å¿—åˆ†æç³»ç»Ÿã€‚å¦‚nginxæ¥å…¥è¯·æ±‚çš„è®¿é—®æ—¥å¿—çºªå½•ã€‚</p><p>3.çƒ­ç‚¹æ•°æ®æœç´¢</p><p>å¦‚ç”µå•†ä¸šåŠ¡çš„å•†å“æœç´¢ç­‰ã€‚</p><h3 id="_2-dslè¯­è¨€é«˜çº§æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_2-dslè¯­è¨€é«˜çº§æŸ¥è¯¢" aria-hidden="true">#</a> 2.DSLè¯­è¨€é«˜çº§æŸ¥è¯¢</h3><p>1.Query DSLæ¦‚è¿°</p><p>Domain Specific Language é¢†åŸŸä¸“ç”¨è¯­è¨€</p><ul><li>Elasticsearch provides a ful1 Query DSL based on JSON to define queries</li><li>Elasticsearchæä¾›äº†åŸºäºJSONçš„DSLæ¥å®šä¹‰æŸ¥è¯¢ã€‚</li></ul><p>DSLç”±å¶å­æŸ¥è¯¢å­å¥å’Œå¤åˆæŸ¥è¯¢å­å¥ä¸¤ç§å­å¥ç»„æˆã€‚</p><figure><img src="/assets/img_111-1XIaBFtN.png" alt="img_111.png" tabindex="0" loading="lazy"><figcaption>img_111.png</figcaption></figure><p><strong>2.æ¨¡ç³ŠåŒ¹é…</strong></p><p>æ¨¡ç³ŠåŒ¹é…ä¸»è¦æ˜¯é’ˆå¯¹æ–‡æœ¬ç±»å‹çš„å­—æ®µï¼Œæ–‡æœ¬ç±»å‹çš„å­—æ®µä¼šå¯¹å†…å®¹è¿›è¡Œåˆ†è¯ï¼Œå¯¹æŸ¥è¯¢æ—¶ï¼Œä¹Ÿä¼šå¯¹æœç´¢æ¡ä»¶è¿›è¡Œåˆ†è¯ï¼Œç„¶åé€šè¿‡å€’æ’ç´¢å¼•æŸ¥æ‰¾åˆ°åŒ¹é…çš„æ•°æ®ï¼Œæ¨¡ç³ŠåŒ¹é…ä¸»è¦é€šè¿‡matchç­‰å‚æ•°æ¥å®ç°</p><ul><li>match : é€šè¿‡matchå…³é”®è¯æ¨¡ç³ŠåŒ¹é…æ¡ä»¶å†…å®¹</li><li>prefix : å‰ç¼€åŒ¹é…</li><li>regexp : é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…æ•°æ®</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>POST <span class="token operator">/</span>es_db<span class="token operator">/</span>_doc<span class="token operator">/</span>_search
{
<span class="token string">&quot;from&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token string">&quot;size&quot;</span>: <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token string">&quot;query&quot;</span>: {
<span class="token string">&quot;match&quot;</span>: {
<span class="token string">&quot;address&quot;</span>: <span class="token string">&quot;å¹¿å·&quot;</span>
}
}
}
    
<span class="token keyword">SQL</span>: <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> address <span class="token operator">like</span> <span class="token string">&#39;%å¹¿å·%&#39;</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.ç²¾ç¡®åŒ¹é…</strong></p><ul><li>term : å•ä¸ªæ¡ä»¶ç›¸ç­‰</li><li>terms : å•ä¸ªå­—æ®µå±äºæŸä¸ªå€¼æ•°ç»„å†…çš„å€¼</li><li>range : å­—æ®µå±äºæŸä¸ªèŒƒå›´å†…çš„å€¼</li><li>exists : æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦å­˜åœ¨</li><li>ids : é€šè¿‡IDæ‰¹é‡æŸ¥è¯¢</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>POST <span class="token operator">/</span>es_db<span class="token operator">/</span>_doc<span class="token operator">/</span>_search
{
<span class="token string">&quot;query&quot;</span>: {
<span class="token string">&quot;term&quot;</span>: {
<span class="token string">&quot;name&quot;</span>: <span class="token string">&quot;admin&quot;</span>
}
}
}

<span class="token keyword">SQL</span>: <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&#39;admin&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-èšåˆæœç´¢" tabindex="-1"><a class="header-anchor" href="#_4-èšåˆæœç´¢" aria-hidden="true">#</a> 4.èšåˆæœç´¢</h3><p><strong>1.bucketå’Œmetric</strong></p><p>bucketå°±æ˜¯ä¸€ä¸ªèšåˆæœç´¢æ—¶çš„æ•°æ®åˆ†ç»„ã€‚</p><p>å¦‚ï¼šé”€å”®éƒ¨é—¨æœ‰å‘˜å·¥å¼ ä¸‰å’Œæå››ï¼Œå¼€å‘éƒ¨é—¨æœ‰å‘˜å·¥ç‹äº”å’Œèµµå…­ã€‚é‚£ä¹ˆæ ¹æ®éƒ¨é—¨åˆ†ç»„èšåˆå¾—åˆ°ç»“æœå°±æ˜¯ä¸¤ä¸ªbucketã€‚é”€å”®éƒ¨é—¨bucketä¸­æœ‰å¼ ä¸‰å’Œæå››ï¼Œå¼€å‘éƒ¨é—¨ bucketä¸­æœ‰ç‹äº”å’Œèµµå…­ã€‚</p><p>metricå°±æ˜¯å¯¹ä¸€ä¸ªbucketæ•°æ®æ‰§è¡Œçš„ç»Ÿè®¡åˆ†æã€‚å¦‚ä¸Šè¿°æ¡ˆä¾‹ä¸­ï¼Œå¼€å‘éƒ¨é—¨æœ‰2ä¸ªå‘˜å·¥ï¼Œé”€å”®éƒ¨é—¨æœ‰2ä¸ªå‘˜å·¥ï¼Œè¿™å°±æ˜¯metricã€‚</p><p>metricæœ‰å¤šç§ç»Ÿè®¡ï¼Œå¦‚ï¼šæ±‚å’Œï¼Œæœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå¹³å‡å€¼ç­‰ã€‚</p><p>ç”¨ä¸€ä¸ªå¤§å®¶å®¹æ˜“ç†è§£çš„SQLè¯­æ³•æ¥è§£é‡Šï¼Œå¦‚ï¼šselect count() from table group by columnã€‚é‚£ä¹ˆgroup by columnåˆ†ç»„åçš„æ¯ç»„æ•°æ®å°±æ˜¯bucketã€‚å¯¹æ¯ä¸ªåˆ†ç»„æ‰§è¡Œçš„count()å°±æ˜¯metricã€‚</p><p>esæœ€é‡è¦çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯æ•°æ®æ£€ç´¢ï¼Œç»Ÿè®¡åˆ†ææˆ‘è®¤ä¸ºä¸æ˜¯esæœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œæƒ³è¿™ç§ç¦»çº¿ç»Ÿè®¡åº”è¯¥ç”±å…¶ä»–çš„æ›¿ä»£æ–¹æ¡ˆå»åšï¼Œæ‰€ä»¥å¦‚æœæƒ³äº†è§£æ›´å¤šesèšåˆæœç´¢ç›¸å…³çŸ¥è¯†å¯ä»¥å‚è€ƒå®˜ç½‘æˆ–è€…å…¶ä»–åšå®¢</p><h2 id="_3-æ–‡æ¡£æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#_3-æ–‡æ¡£æ˜ å°„" aria-hidden="true">#</a> 3.æ–‡æ¡£æ˜ å°„</h2><p>ESä¸­æ˜ å°„å¯ä»¥åˆ†ä¸ºåŠ¨æ€æ˜ å°„å’Œé™æ€æ˜ å°„</p><h3 id="_1-åŠ¨æ€æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#_1-åŠ¨æ€æ˜ å°„" aria-hidden="true">#</a> 1.åŠ¨æ€æ˜ å°„</h3><p>åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œéœ€è¦äº‹å…ˆåˆ›å»ºæ•°æ®åº“ï¼Œç„¶ååœ¨è¯¥æ•°æ®åº“ä¸‹åˆ›å»ºæ•°æ®è¡¨ï¼Œå¹¶åˆ›å»ºè¡¨å­—æ®µã€ç±»å‹ã€é•¿åº¦ã€ä¸»é”®ç­‰ï¼Œæœ€åæ‰èƒ½åŸºäºè¡¨æ’å…¥æ•°æ®ã€‚è€ŒElasticsearchä¸­ä¸éœ€è¦å®šä¹‰Mappingæ˜ å°„ï¼ˆå³å…³ç³»å‹æ•°æ®åº“çš„è¡¨ã€å­—æ®µç­‰ï¼‰ï¼Œåœ¨æ–‡æ¡£å†™å…¥Elasticsearchæ—¶ï¼Œä¼šæ ¹æ®æ–‡æ¡£å­—æ®µè‡ªåŠ¨è¯†åˆ«ç±»å‹ï¼Œè¿™ç§æœºåˆ¶ç§°ä¹‹ä¸ºåŠ¨æ€æ˜ å°„ã€‚<br> åŠ¨æ€æ˜ å°„è§„åˆ™å¦‚ä¸‹ï¼š</p><figure><img src="/assets/img_112-R_LOrTZY.png" alt="img_112.png" tabindex="0" loading="lazy"><figcaption>img_112.png</figcaption></figure><h3 id="_2-é™æ€æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#_2-é™æ€æ˜ å°„" aria-hidden="true">#</a> 2.é™æ€æ˜ å°„</h3><p>é™æ€æ˜ å°„æ˜¯åœ¨Elasticsearchä¸­ä¹Ÿå¯ä»¥äº‹å…ˆå®šä¹‰å¥½æ˜ å°„ï¼ŒåŒ…å«æ–‡æ¡£çš„å„å­—æ®µç±»å‹ã€åˆ†è¯å™¨ç­‰ï¼Œè¿™ç§æ–¹å¼ç§°ä¹‹ä¸ºé™æ€æ˜ å°„ã€‚</p><h3 id="_3-æ ¸å¿ƒç±»å‹-core-datatype" tabindex="-1"><a class="header-anchor" href="#_3-æ ¸å¿ƒç±»å‹-core-datatype" aria-hidden="true">#</a> 3.æ ¸å¿ƒç±»å‹ï¼ˆCore datatypeï¼‰</h3><ul><li>å­—ç¬¦ä¸²ï¼šstringï¼Œstringç±»å‹åŒ…å« text å’Œ keywordã€‚</li><li>textï¼šè¯¥ç±»å‹è¢«ç”¨æ¥ç´¢å¼•é•¿æ–‡æœ¬ï¼Œåœ¨åˆ›å»ºç´¢å¼•å‰ä¼šå°†è¿™äº›æ–‡æœ¬è¿›è¡Œåˆ†è¯ï¼Œè½¬åŒ–ä¸ºè¯çš„ç»„åˆï¼Œå»ºç«‹ç´¢å¼•ï¼›å…è®¸esæ¥æ£€ç´¢è¿™äº›è¯ï¼Œtextç±»å‹ä¸èƒ½ç”¨æ¥æ’åºå’Œèšåˆã€‚</li><li>keywordï¼šè¯¥ç±»å‹ä¸èƒ½åˆ†è¯ï¼Œå¯ä»¥è¢«ç”¨æ¥æ£€ç´¢è¿‡æ»¤ã€æ’åºå’Œèšåˆï¼Œkeywordç±»å‹ä¸å¯ç”¨textè¿›è¡Œåˆ†è¯æ¨¡ç³Šæ£€ç´¢ã€‚</li><li>æ•°å€¼å‹ï¼šlongã€integerã€shortã€byteã€doubleã€float</li><li>æ—¥æœŸå‹ï¼šdate</li><li>å¸ƒå°”å‹ï¼šboolean</li></ul><h2 id="_4-æ•°æ®å»ºæ¨¡" tabindex="-1"><a class="header-anchor" href="#_4-æ•°æ®å»ºæ¨¡" aria-hidden="true">#</a> 4.æ•°æ®å»ºæ¨¡</h2><p>å°±æ˜¯é’ˆå¯¹äºå…³ç³»å‹æ•°æ®åº“çš„ä¸€å¯¹å¤šæ•°æ®æ¨¡å‹ï¼Œè€Œæˆ‘è‡ªå·±è®¤ä¸ºesçš„ä¸»è¦åº”ç”¨åœºæ™¯æ˜¯å…¨æ–‡æœç´¢å¼•æ“ï¼Œè¿™ç§å¤æ‚çš„ä¸šåŠ¡å…³ç³»å°±åº”è¯¥ç”±å…³ç³»å‹æ•°æ®åº“å¦‚mysqlå»å®Œæˆæ•°æ®å»ºæ¨¡å’Œå­˜å‚¨ï¼Œè€Œä¸æ˜¯äº¤ç»™eså»å»ºæ¨¡å­˜å‚¨ï¼Œå½“ç„¶esä¹Ÿæ˜¯æä¾›äº†Parent / Childç›¸å…³æœºåˆ¶ç»§ç»­æ•°æ®å»ºæ¨¡ï¼Œå¦‚æœæœ‰åœºæ™¯ä½¿ç”¨åˆ°ï¼Œè‡ªå·±å»å‚è€ƒå¯¹åº”çš„å®˜æ–¹æ–‡æ¡£äº†è§£å³å¯ï¼Œä½†æˆ‘è‡ªå·±ä¸å»ºè®®è¿™æ ·åšã€‚</p><h2 id="_5-åˆ†é¡µæŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_5-åˆ†é¡µæŸ¥è¯¢" aria-hidden="true">#</a> 5.åˆ†é¡µæŸ¥è¯¢</h2><h3 id="_1-è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_1-è¯­æ³•" aria-hidden="true">#</a> 1.è¯­æ³•</h3><p>åœ¨å­˜åœ¨å¤§é‡æ•°æ®æ—¶ï¼Œä¸€èˆ¬æˆ‘ä»¬è¿›è¡ŒæŸ¥è¯¢éƒ½éœ€è¦è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬æŒ‡å®šé¡µç ã€å¹¶æŒ‡å®šæ¯é¡µæ˜¾ç¤ºå¤šå°‘æ¡æ•°æ®ï¼Œç„¶åElasticsearchè¿”å›å¯¹åº”é¡µç çš„æ•°æ®ã€‚</p><p>åœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¯ä»¥æŒ‡å®šfromï¼ˆä»ç¬¬å‡ æ¡æ•°æ®å¼€å§‹æŸ¥èµ·ï¼‰å’Œsizeï¼ˆæ¯é¡µè¿”å›å¤šå°‘æ¡ï¼‰æ•°æ®ï¼Œå°±å¯ä»¥è½»æ¾å®Œæˆåˆ†é¡µã€‚</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>POST <span class="token operator">/</span>es_db<span class="token operator">/</span>_doc<span class="token operator">/</span>_search
{
<span class="token string">&quot;from&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token string">&quot;size&quot;</span>: <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token string">&quot;query&quot;</span>: {
<span class="token string">&quot;match&quot;</span>: {
<span class="token string">&quot;address&quot;</span>: <span class="token string">&quot;å¹¿å·å¤©æ²³&quot;</span>
}
}
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-scrollè§£å†³æ·±åˆ†é¡µé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2-scrollè§£å†³æ·±åˆ†é¡µé—®é¢˜" aria-hidden="true">#</a> 2.scrollè§£å†³æ·±åˆ†é¡µé—®é¢˜</h3><p>å‰é¢ä½¿ç”¨fromå’Œsizeæ–¹å¼ï¼ŒæŸ¥è¯¢åœ¨1Wæ¡æ•°æ®ä»¥å†…éƒ½æ˜¯OKçš„ï¼Œä½†å¦‚æœæ•°æ®æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¼šå‡ºç°æ€§èƒ½é—®é¢˜ã€‚Elasticsearchåšäº†ä¸€ä¸ªé™åˆ¶ï¼Œä¸å…è®¸æŸ¥è¯¢çš„æ˜¯10000æ¡ä»¥åçš„æ•°æ®ã€‚å¦‚æœè¦æŸ¥è¯¢1Wæ¡ä»¥åçš„æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨Elasticsearchä¸­æä¾›çš„scrollæ¸¸æ ‡æ¥æŸ¥è¯¢ã€‚</p><p>åœ¨è¿›è¡Œå¤§é‡åˆ†é¡µæ—¶ï¼Œæ¯æ¬¡åˆ†é¡µéƒ½éœ€è¦å°†è¦æŸ¥è¯¢çš„æ•°æ®è¿›è¡Œé‡æ–°æ’åºï¼Œè¿™æ ·éå¸¸æµªè´¹æ€§èƒ½ã€‚</p><p>ä½¿ç”¨scrollæ˜¯å°†è¦ç”¨çš„æ•°æ®ä¸€æ¬¡æ€§æ’åºå¥½ï¼Œç„¶ååˆ†æ‰¹å–å‡º,æ€§èƒ½è¦æ¯”from + sizeå¥½å¾—å¤šã€‚</p><p>ä½¿ç”¨scrollæŸ¥è¯¢åï¼Œæ’åºåçš„æ•°æ®ä¼šä¿æŒä¸€å®šçš„æ—¶é—´ï¼Œåç»­çš„åˆ†é¡µæŸ¥è¯¢éƒ½ä»è¯¥å¿«ç…§å–æ•°æ®å³å¯ã€‚</p><p>ç¬¬ä¸€æ¬¡ä½¿ç”¨scrollåˆ†é¡µæŸ¥è¯¢</p><p>æ­¤å¤„ï¼Œæˆ‘ä»¬è®©æ’åºçš„æ•°æ®ä¿æŒ1åˆ†é’Ÿï¼Œæ‰€ä»¥è®¾ç½®scrollä¸º1m</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>GET <span class="token operator">/</span>es_db<span class="token operator">/</span>_search?scroll<span class="token operator">=</span><span class="token number">1</span>m
{
<span class="token string">&quot;query&quot;</span>: {
<span class="token string">&quot;multi_match&quot;</span>:{
<span class="token string">&quot;query&quot;</span>:<span class="token string">&quot;å¹¿å·é•¿æ²™å¼ ä¸‰&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;fields&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;address&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span>
}
}<span class="token punctuation">,</span>
<span class="token string">&quot;size&quot;</span>:<span class="token number">100</span>
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œåï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ï¼Œåœ¨å“åº”ç»“æœä¸­æœ‰ä¸€é¡¹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token string">&quot;_scroll_id&quot;</span>: <span class="token string">&quot;DXF1ZXJ5QW5kRmV0Y2gBAAAAAAAAAZEWY2VQZXBia1JTVkdhTWkwSl9GaUYtQQ==&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åç»­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è¿™ä¸ª_scroll_idæ¥è¿›è¡ŒæŸ¥è¯¢</p><p>ç¬¬äºŒæ¬¡ç›´æ¥ä½¿ç”¨scroll idè¿›è¡ŒæŸ¥è¯¢</p><h2 id="_6-suggest-search" tabindex="-1"><a class="header-anchor" href="#_6-suggest-search" aria-hidden="true">#</a> 6.suggest search</h2><p>suggest searchï¼ˆcompletion suggestï¼‰ï¼šå°±æ˜¯å»ºè®®æœç´¢æˆ–ç§°ä¸ºæœç´¢å»ºè®®ï¼Œä¹Ÿå¯ä»¥å«åšè‡ªåŠ¨å®Œæˆ-auto completionã€‚ç±»ä¼¼ç™¾åº¦ä¸­çš„æœç´¢è”æƒ³æç¤ºåŠŸèƒ½ã€‚</p><p>ESå®ç°suggestçš„æ—¶å€™ï¼Œæ€§èƒ½éå¸¸é«˜ï¼Œå…¶æ„å»ºçš„ä¸æ˜¯å€’æ’ç´¢å¼•ï¼Œä¹Ÿä¸æ˜¯æ­£æ’ç´¢å¼•ï¼Œå°±æ˜¯çº¯çš„ç”¨äºè¿›è¡Œå‰ç¼€æœç´¢çš„ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œè€Œä¸”ä¼šå…¨éƒ¨æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥suggest searchè¿›è¡Œçš„å‰ç¼€æœç´¢æç¤ºï¼Œæ€§èƒ½æ˜¯éå¸¸é«˜ã€‚</p><p>éœ€è¦ä½¿ç”¨suggestçš„æ—¶å€™ï¼Œå¿…é¡»åœ¨å®šä¹‰indexæ—¶ï¼Œä¸ºå…¶mappingæŒ‡å®šå¼€å¯suggestã€‚</p><p>å…·ä½“å¦‚ä¸‹:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>PUT <span class="token operator">/</span>movie
{
<span class="token string">&quot;mappings&quot;</span>: {
<span class="token string">&quot;properties&quot;</span> : {
<span class="token string">&quot;title&quot;</span> : {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;fields&quot;</span>: {
<span class="token string">&quot;suggest&quot;</span> : {
<span class="token string">&quot;type&quot;</span> : <span class="token string">&quot;completion&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;ik_max_word&quot;</span>
}
}
}<span class="token punctuation">,</span>
<span class="token string">&quot;content&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;ik_max_word&quot;</span>
}
}
}
}

PUT <span class="token operator">/</span>movie<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span>
{
<span class="token string">&quot;title&quot;</span>: <span class="token string">&quot;è¥¿æ¸¸è®°ç”µå½±ç³»åˆ—&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;content&quot;</span>: <span class="token string">&quot;è¥¿æ¸¸è®°ä¹‹æœˆå…‰å®ç›’å°†ä¸2021å¹´è¿›è¡Œ......&quot;</span>
}

PUT <span class="token operator">/</span>movie<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">2</span>
{
<span class="token string">&quot;title&quot;</span>: <span class="token string">&quot;è¥¿æ¸¸è®°æ–‡å­¦ç³»åˆ—&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;content&quot;</span>: <span class="token string">&quot;æŸçŸ¥åç½‘ç»œå°è¯´ä½œå®¶å·²ç»å®Œæˆäº†å¤§è¯è¥¿æ¸¸åŒåå°è¯´çš„å‡ºç‰ˆ&quot;</span>
}

PUT <span class="token operator">/</span>movie<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">3</span>
{
<span class="token string">&quot;title&quot;</span>: <span class="token string">&quot;è¥¿æ¸¸è®°ä¹‹å¤§è¯è¥¿æ¸¸æ‰‹æ¸¸&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;content&quot;</span>: <span class="token string">&quot;ç½‘æ˜“æ¸¸æˆè¿‘æ—¥å‡ºå“äº†å¤§è¯è¥¿æ¸¸ç»å…¸IPçš„æ‰‹æ¸¸ï¼Œæ­£åœ¨ç«çˆ†å†…æµ‹ä¸­&quot;</span>
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>suggest æœç´¢ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>GET <span class="token operator">/</span>movie<span class="token operator">/</span>_search
{
<span class="token string">&quot;suggest&quot;</span>: {
<span class="token string">&quot;my-suggest&quot;</span> : {
<span class="token string">&quot;prefix&quot;</span> : <span class="token string">&quot;è¥¿æ¸¸è®°&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;completion&quot;</span> : {
<span class="token string">&quot;field&quot;</span> : <span class="token string">&quot;title.suggest&quot;</span>
}
}
}
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äºŒã€esæ ¸å¿ƒåŸç†" tabindex="-1"><a class="header-anchor" href="#äºŒã€esæ ¸å¿ƒåŸç†" aria-hidden="true">#</a> äºŒã€ESæ ¸å¿ƒåŸç†</h2><h3 id="_1-eså­˜å‚¨æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_1-eså­˜å‚¨æ¨¡å‹" aria-hidden="true">#</a> 1.ESå­˜å‚¨æ¨¡å‹</h3><p>Elasticsearchä¸å…³ç³»æ•°æ®åº“ç»“æ„å¯¹åº”</p><figure><img src="/assets/img_113-27QaxlqO.png" alt="img_113.png" tabindex="0" loading="lazy"><figcaption>img_113.png</figcaption></figure><p>ElasticSearchçš„å¯¹è±¡æ¨¡å‹ï¼Œè·Ÿå…³ç³»å‹æ•°æ®åº“æ¨¡å‹ç›¸æ¯”ï¼š</p><h3 id="_1-ç´¢å¼•-index" tabindex="-1"><a class="header-anchor" href="#_1-ç´¢å¼•-index" aria-hidden="true">#</a> 1.ç´¢å¼•ï¼ˆIndexï¼‰</h3><p>ç›¸å½“äºæ•°æ®åº“ï¼Œç”¨äºå®šä¹‰æ–‡æ¡£ç±»å‹çš„å­˜å‚¨ï¼›åœ¨åŒä¸€ä¸ªç´¢å¼•ä¸­ï¼ŒåŒä¸€ä¸ªå­—æ®µåªèƒ½å®šä¹‰ä¸€ä¸ªæ•°æ®ç±»å‹ï¼›</p><p>ä¸€ä¸ªç´¢å¼•å°±æ˜¯ä¸€ä¸ªæ‹¥æœ‰å‡ åˆ†ç›¸ä¼¼ç‰¹å¾çš„æ–‡æ¡£çš„é›†åˆã€‚æ¯”å¦‚è¯´ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªå®¢æˆ·æ•°æ®çš„ç´¢å¼•ï¼Œå¦ä¸€ä¸ªäº§å“ç›®å½•çš„ç´¢å¼•ï¼Œè¿˜æœ‰ä¸€ä¸ªè®¢å•æ•°æ®çš„ç´¢å¼•<br> ä¸€ä¸ªç´¢å¼•ç”±ä¸€ä¸ªåå­—æ¥æ ‡è¯†ï¼ˆå¿…é¡»å…¨éƒ¨æ˜¯å°å†™å­—æ¯çš„ï¼‰ï¼Œå¹¶ä¸”å½“æˆ‘ä»¬è¦å¯¹å¯¹åº”äºè¿™ä¸ªç´¢å¼•ä¸­çš„æ–‡æ¡£è¿›è¡Œç´¢å¼•ã€æœç´¢ã€æ›´æ–°å’Œåˆ é™¤çš„æ—¶å€™ï¼Œéƒ½è¦ä½¿ç”¨åˆ°è¿™ä¸ªåå­—</p><h3 id="_2-æ–‡æ¡£ç±»å‹-type" tabindex="-1"><a class="header-anchor" href="#_2-æ–‡æ¡£ç±»å‹-type" aria-hidden="true">#</a> 2.æ–‡æ¡£ç±»å‹ï¼ˆTypeï¼‰</h3><p>ç›¸å½“äºå…³ç³»è¡¨ï¼Œç”¨äºæè¿°æ–‡æ¡£ä¸­çš„å„ä¸ªå­—æ®µçš„å®šä¹‰ï¼›ä¸åŒçš„æ–‡æ¡£ç±»å‹ï¼Œèƒ½å¤Ÿå­˜å‚¨ä¸åŒçš„å­—æ®µï¼ŒæœåŠ¡äºä¸åŒçš„æŸ¥è¯¢è¯·æ±‚ï¼›</p><p>æ¯ä¸€ä¸ªå­—æ®µéƒ½åº”è¯¥æœ‰ä¸€ä¸ªå¯¹åº”çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼šTextã€Keywordã€Byteç­‰</p><h3 id="_3-æ–‡æ¡£-document" tabindex="-1"><a class="header-anchor" href="#_3-æ–‡æ¡£-document" aria-hidden="true">#</a> 3.æ–‡æ¡£ï¼ˆDocumentï¼‰</h3><p>ç›¸å½“äºå…³ç³»è¡¨çš„æ•°æ®è¡Œï¼Œå­˜å‚¨æ•°æ®çš„è½½ä½“ï¼ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå­˜æœ‰æ•°æ®çš„å­—æ®µï¼›</p><p>ä¸€ä¸ªæ–‡æ¡£æ˜¯ä¸€ä¸ªå¯è¢«ç´¢å¼•çš„åŸºç¡€ä¿¡æ¯å•å…ƒï¼Œç±»ä¼¼ä¸€æ¡è®°å½•ã€‚æ–‡æ¡£ä»¥JSONï¼ˆJavascript Object Notationï¼‰æ ¼å¼æ¥è¡¨ç¤ºï¼›</p><h3 id="_4-å­—æ®µ-field" tabindex="-1"><a class="header-anchor" href="#_4-å­—æ®µ-field" aria-hidden="true">#</a> 4.å­—æ®µï¼ˆFieldï¼‰</h3><p>æ–‡æ¡£çš„ä¸€ä¸ªKey/Valueå¯¹ï¼›</p><ul><li>è¯ï¼ˆTermï¼‰ï¼šè¡¨ç¤ºæ–‡æœ¬ä¸­çš„ä¸€ä¸ªå•è¯ï¼›</li><li>æ ‡è®°ï¼ˆTokenï¼‰ï¼šè¡¨ç¤ºåœ¨å­—æ®µä¸­å‡ºç°çš„è¯ï¼Œç”±è¯¥è¯çš„æ–‡æœ¬ã€åç§»é‡ï¼ˆå¼€å§‹å’Œç»“æŸï¼‰ä»¥åŠç±»å‹ç»„æˆï¼›</li></ul><p>ç›¸å½“äºæ˜¯æ•°æ®è¡¨çš„å­—æ®µ|åˆ—</p><h3 id="_2-å€’æ’ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_2-å€’æ’ç´¢å¼•" aria-hidden="true">#</a> 2.å€’æ’ç´¢å¼•</h3><p>å…¨æ–‡æœç´¢å¼•æ“çš„æŠ€æœ¯åŸç†è¢«ç§°ä¸ºâ€œå€’æ’ç´¢å¼•â€ï¼ˆInverted indexï¼‰ï¼Œä¹Ÿå¸¸è¢«ç§°ä¸ºåå‘ç´¢å¼•ã€ç½®å…¥æ¡£æ¡ˆæˆ–åå‘æ¡£æ¡ˆï¼Œæ˜¯ä¸€ç§ç´¢å¼•æ–¹æ³•ï¼Œå…¶åŸºæœ¬åŸç†æ˜¯å»ºç«‹å•è¯åˆ°æ–‡æ¡£çš„ç´¢å¼•ã€‚</p><p>ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºâ€œå€’æ’â€ç´¢å¼•ï¼Œæ˜¯å’Œâ€œæ­£æ’â€œç´¢å¼•ç›¸å¯¹çš„ï¼Œâ€œæ­£æ’ç´¢å¼•â€çš„åŸºæœ¬åŸç†æ˜¯å»ºç«‹æ–‡æ¡£åˆ°å•è¯çš„ç´¢å¼•ã€‚æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„æ ·ä¾‹æ¥è¯´æ˜è¿™ä¸¤ç§ç´¢å¼•çš„å·®å¼‚ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæŠ€æœ¯æ–‡ç« çš„ç½‘ç«™ï¼Œé‡Œé¢æ”¶é›†äº†å„ç§æŠ€æœ¯æ–‡ç« ï¼Œç”¨æˆ·å¯ä»¥åœ¨ç½‘ç«™æµè§ˆæˆ–è€…æœç´¢æ–‡ç« ã€‚</p><p>æ­£æ’ç´¢å¼•ç¤ºä¾‹ï¼š</p><figure><img src="/assets/img_114-oprTBbQz.png" alt="img_114.png" tabindex="0" loading="lazy"><figcaption>img_114.png</figcaption></figure><p>ï¼ˆæ³¨ï¼šæ–‡ç« å†…å®¹ä»…ä¸ºç¤ºèŒƒï¼Œæ–‡ç« å†…å®¹å®é™…ä¸Šå­˜å‚¨çš„æ˜¯å‡ åƒå­—çš„å†…å®¹ã€‚ï¼‰</p><p>æ­£æ’ç´¢å¼•é€‚ç”¨äºæ ¹æ®æ–‡æ¡£åç§°æ¥æŸ¥è¯¢æ–‡æ¡£å†…å®¹ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·åœ¨ç½‘ç«™ä¸Šå•å‡»äº†â€œé¢å‘å¯¹è±¡è‘µèŠ±å®å…¸æ˜¯ä»€ä¹ˆâ€ï¼Œç½‘ç«™æ ¹æ®æ–‡ç« æ ‡é¢˜æŸ¥è¯¢æ–‡ç« çš„å†…å®¹å±•ç¤ºç»™ç”¨æˆ·ã€‚</p><p>å€’æ’ç´¢å¼•ç¤ºä¾‹ï¼š</p><figure><img src="/assets/img_115-SySYk1Ie.png" alt="img_115.png" tabindex="0" loading="lazy"><figcaption>img_115.png</figcaption></figure><p>ï¼ˆæ³¨ï¼šè¡¨æ ¼ä»…ä¸ºç¤ºèŒƒï¼Œä¸æ˜¯å®Œæ•´çš„å€’æ’ç´¢å¼•è¡¨æ ¼ï¼Œå®é™…ä¸Šçš„å€’æ’ç´¢å¼•æœ‰æˆåƒä¸Šä¸‡è¡Œï¼Œå› ä¸ºæ¯ä¸ªå•è¯å°±æ˜¯ä¸€ä¸ªç´¢å¼•ã€‚ï¼‰</p><p>å€’æ’ç´¢å¼•é€‚ç”¨äºæ ¹æ®å…³é”®è¯æ¥æŸ¥è¯¢æ–‡æ¡£å†…å®¹ï¼Œå®ƒæ˜¯æ ¹æ®æ–‡ç« å†…å®¹ä¸­çš„å…³é”®å­—å»ºç«‹ç´¢å¼•ï¼Œè€Œå€¼å¯¹åº”äºæ–‡æ¡£IDï¼Œè€Œæœç´¢å‡ºæ¥çš„ç»“æœå°±æ˜¯æ–‡æ¡£IDæ‰€åœ¨è¡Œçš„æ‰€æœ‰å†…å®¹ã€‚</p><p>ä¾‹å¦‚ï¼Œç”¨æˆ·åªæ˜¯æƒ³çœ‹â€œè®¾è®¡â€ç›¸å…³çš„æ–‡ç« ï¼Œç½‘ç«™éœ€è¦å°†æ–‡ç« å†…å®¹ä¸­åŒ…å«â€œè®¾è®¡â€ä¸€è¯çš„æ–‡ç« éƒ½æœç´¢å‡ºæ¥å±•ç¤ºç»™ç”¨æˆ·ã€‚</p><p>è¦æ³¨æ„å€’æ’ç´¢å¼•çš„ä¸¤ä¸ªé‡è¦ç»†èŠ‚ï¼š</p><ul><li>å€’æ’ç´¢å¼•ä¸­çš„æ‰€æœ‰è¯é¡¹å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£ï¼›</li><li>å€’æ’ç´¢å¼•ä¸­çš„è¯é¡¹æ ¹æ®å­—å…¸é¡ºåºå‡åºæ’åˆ—<br> Elasticsearch ä¹Ÿæ˜¯ Master-slave æ¶æ„ï¼Œä¹Ÿå®ç°äº†æ•°æ®çš„åˆ†ç‰‡å’Œå¤‡ä»½ã€‚</li></ul><h3 id="_3-åˆ†è¯å™¨" tabindex="-1"><a class="header-anchor" href="#_3-åˆ†è¯å™¨" aria-hidden="true">#</a> 3.åˆ†è¯å™¨</h3><p>å¯¹äºè‹±æ–‡æ¥è¯´ï¼Œåˆ†è¯æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦æŒ‰ç…§å•è¯çš„ç©ºæ ¼æ¥è¿›è¡Œåˆ†è¯ã€‚<br> å¦‚ä¸‹æ‰€ç¤º<br><img src="/assets/img_116-I-L6WCMi.png" alt="img_116.png" loading="lazy"></p><p>å¦‚æœè¦æœç´¢helloè¿™ä¸ªå…³é”®è¯ï¼Œåˆ™åŒ¹é…çš„ç»“æœå°†æ˜¯ä¸‹é¢ä¸¤ä¸ªå†…å®¹</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>hello world
hello elasticsearch

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ESçš„é»˜è®¤åˆ†è¯è®¾ç½®æ˜¯standardï¼Œè¿™ä¸ªåœ¨ä¸­æ–‡åˆ†è¯æ—¶å°±æ¯”è¾ƒå°´å°¬äº†ï¼Œä¼šå•å­—æ‹†åˆ†ï¼Œæ¯”å¦‚æˆ‘æœç´¢å…³é”®è¯â€œæ¸…åå¤§å­¦â€ï¼Œè¿™æ—¶å€™ä¼šæŒ‰â€œæ¸…â€ï¼Œâ€œåâ€ï¼Œâ€œå¤§â€ï¼Œâ€œå­¦â€å»åˆ†è¯ï¼Œç„¶åæœå‡ºæ¥çš„éƒ½æ˜¯äº›â€œæ¸…æ¸…çš„æ²³æ°´â€ï¼Œâ€œä¸­åå„¿å¥³â€ï¼Œâ€œåœ°å¤§ç‰©åšâ€ï¼Œâ€œå­¦è€Œä¸æ€åˆ™ç½”â€ä¹‹ç±»çš„è«åå…¶å¦™çš„ç»“æœã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å°±æƒ³æŠŠè¿™ä¸ªåˆ†è¯æ–¹å¼ä¿®æ”¹ä¸€ä¸‹ï¼Œäºæ˜¯å‘¢ï¼Œå°±æƒ³åˆ°äº†ikåˆ†è¯å™¨ï¼Œæœ‰ä¸¤ç§ik_smartå’Œik_max_wordã€‚</p><p>ik_smartä¼šå°†â€œæ¸…åå¤§å­¦â€æ•´ä¸ªåˆ†ä¸ºä¸€ä¸ªè¯ï¼Œè€Œik_max_wordä¼šå°†â€œæ¸…åå¤§å­¦â€åˆ†ä¸ºâ€œæ¸…åå¤§å­¦â€ï¼Œâ€œæ¸…åâ€å’Œâ€œå¤§å­¦â€ï¼ŒæŒ‰éœ€é€‰å…¶ä¸­ä¹‹ä¸€å°±å¯ä»¥äº†ã€‚</p><p>ä¿®æ”¹é»˜è®¤åˆ†è¯æ–¹æ³•(è¿™é‡Œä¿®æ”¹school_indexç´¢å¼•çš„é»˜è®¤åˆ†è¯ä¸ºï¼šik_max_word)ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>PUT <span class="token operator">/</span>school_index
{
<span class="token string">&quot;settings&quot;</span> : {
<span class="token string">&quot;index&quot;</span> : {
<span class="token string">&quot;analysis.analyzer.default.type&quot;</span>: <span class="token string">&quot;ik_max_word&quot;</span>
}
}
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1.åˆ†è¯å™¨å·¥ä½œæµç¨‹<br><img src="/assets/img_117-JxRardkt.png" alt="img_117.png" loading="lazy"><br> åˆ†è¯å™¨ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>Character Filterï¼šå°†æ–‡æœ¬ä¸­htmlæ ‡ç­¾å‰”é™¤æ‰ã€‚</li><li>Tokenizerï¼šæŒ‰ç…§è§„åˆ™è¿›è¡Œåˆ†è¯ï¼Œåœ¨è‹±æ–‡ä¸­æŒ‰ç…§ç©ºæ ¼åˆ†è¯</li><li>Token Filterï¼šå°†åˆ‡åˆ†çš„å•è¯è¿›è¡ŒåŠ å·¥ï¼Œå°å†™ï¼Œåˆ é™¤ stopwords(åœé¡¿è¯ï¼Œaã€anã€theã€isç­‰),å¢åŠ åŒä¹‰è¯</li></ul><p>æ¯ä¸ªç»„ä»¶çš„ä½œç”¨ï¼Œå¯å‚è€ƒä¸‹é¢çš„ä¾‹å­</p><p>character filterï¼šåœ¨ä¸€æ®µæ–‡æœ¬è¿›è¡Œåˆ†è¯ä¹‹å‰ï¼Œå…ˆè¿›è¡Œé¢„å¤„ç†ï¼Œæ¯”å¦‚è¯´æœ€å¸¸è§çš„å°±æ˜¯ï¼Œè¿‡æ»¤htmlæ ‡ç­¾</p><p>tokenizerï¼šåˆ†è¯ï¼Œhello you and me --&gt; hello, you, and, me</p><p>token filterï¼šlowercaseï¼Œstop wordï¼Œsynonymomï¼Œliked --&gt; likeï¼ŒTom --&gt; tomï¼Œa/the/an --&gt; å¹²æ‰ï¼Œsmall --&gt; little</p><p><strong>2.ESå†…ç½®åˆ†è¯å™¨</strong></p><ul><li>Standard Analyzer - é»˜è®¤åˆ†è¯å™¨ï¼ŒæŒ‰è¯åˆ‡åˆ†ï¼Œå°å†™å¤„ç†</li><li>Simple Analyzer - æŒ‰ç…§éå­—æ¯åˆ‡åˆ†(ç¬¦å·è¢«è¿‡æ»¤), å°å†™å¤„ç†</li><li>Stop Analyzer - å°å†™å¤„ç†ï¼Œåœç”¨è¯è¿‡æ»¤(the,a,is)</li><li>Whitespace Analyzer - æŒ‰ç…§ç©ºæ ¼åˆ‡åˆ†ï¼Œä¸è½¬å°å†™</li><li>Keyword Analyzer - ä¸åˆ†è¯ï¼Œç›´æ¥å°†è¾“å…¥å½“ä½œè¾“å‡º</li><li>Patter Analyzer - æ­£åˆ™è¡¨è¾¾å¼ï¼Œé»˜è®¤\W+(éå­—ç¬¦åˆ†å‰²)</li><li>Language - æä¾›äº†30å¤šç§å¸¸è§è¯­è¨€çš„åˆ†è¯å™¨</li><li>Customer Analyzer è‡ªå®šä¹‰åˆ†è¯å™¨</li></ul><p>æ¯ä¸ªå†…ç½®åˆ†è¯å™¨çš„ä½œç”¨ï¼Œå¯å‚è€ƒä¸‹é¢çš„ä¾‹å­</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Set</span> the shape <span class="token keyword">to</span> semi<span class="token operator">-</span>transparent <span class="token keyword">by</span> calling set_trans<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

standard analyzerï¼š<span class="token keyword">set</span><span class="token punctuation">,</span> the<span class="token punctuation">,</span> shape<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> semi<span class="token punctuation">,</span> transparent<span class="token punctuation">,</span> <span class="token keyword">by</span><span class="token punctuation">,</span> calling<span class="token punctuation">,</span> set_trans<span class="token punctuation">,</span> <span class="token number">5</span>ï¼ˆé»˜è®¤çš„æ˜¯standardï¼‰

<span class="token keyword">simple</span> analyzerï¼š<span class="token keyword">set</span><span class="token punctuation">,</span> the<span class="token punctuation">,</span> shape<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> semi<span class="token punctuation">,</span> transparent<span class="token punctuation">,</span> <span class="token keyword">by</span><span class="token punctuation">,</span> calling<span class="token punctuation">,</span> <span class="token keyword">set</span><span class="token punctuation">,</span> trans

whitespace analyzerï¼š<span class="token keyword">Set</span><span class="token punctuation">,</span> the<span class="token punctuation">,</span> shape<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> semi<span class="token operator">-</span>transparent<span class="token punctuation">,</span> <span class="token keyword">by</span><span class="token punctuation">,</span> calling<span class="token punctuation">,</span> set_trans<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

stop analyzer:ç§»é™¤åœç”¨è¯ï¼Œæ¯”å¦‚a the itç­‰ç­‰
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.å®šåˆ¶åˆ†è¯å™¨</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>PUT <span class="token operator">/</span>my_index
{
<span class="token string">&quot;settings&quot;</span>: {
<span class="token string">&quot;analysis&quot;</span>: {
<span class="token string">&quot;analyzer&quot;</span>: {
<span class="token string">&quot;es_std&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;stopwords&quot;</span>: <span class="token string">&quot;_english_&quot;</span>
}
}
}
}
}

GET <span class="token operator">/</span>my_index<span class="token operator">/</span>_analyze
{
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;text&quot;</span>: <span class="token string">&quot;a dog is in the house&quot;</span>
}

GET <span class="token operator">/</span>my_index<span class="token operator">/</span>_analyze
{
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;es_std&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;text&quot;</span>:<span class="token string">&quot;a dog is in the house&quot;</span>
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ã€å®šåˆ¶åŒ–è‡ªå·±çš„åˆ†è¯å™¨</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>PUT <span class="token operator">/</span>my_index
{
<span class="token string">&quot;settings&quot;</span>: {
<span class="token string">&quot;analysis&quot;</span>: {
<span class="token string">&quot;char_filter&quot;</span>: {
<span class="token string">&quot;&amp;_to_and&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;mapping&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;mappings&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;&amp;=&gt; and&quot;</span><span class="token punctuation">]</span>
}
}<span class="token punctuation">,</span>
<span class="token string">&quot;filter&quot;</span>: {
<span class="token string">&quot;my_stopwords&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;stop&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;stopwords&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;the&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span>
}
}<span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: {
<span class="token string">&quot;my_analyzer&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;char_filter&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;html_strip&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&amp;_to_and&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;tokenizer&quot;</span>: <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;filter&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;my_stopwords&quot;</span><span class="token punctuation">]</span>
}
}
}
}
}

GET <span class="token operator">/</span>my_index<span class="token operator">/</span>_analyze
{
<span class="token string">&quot;text&quot;</span>: <span class="token string">&quot;tom&amp;jerry are a friend in the house, &lt;a&gt;, HAHA!!&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;my_analyzer&quot;</span>
}

PUT <span class="token operator">/</span>my_index<span class="token operator">/</span>_mapping<span class="token operator">/</span>my_type
{
<span class="token string">&quot;properties&quot;</span>: {
<span class="token string">&quot;content&quot;</span>: {
<span class="token string">&quot;type&quot;</span>: <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;analyzer&quot;</span>: <span class="token string">&quot;my_analyzer&quot;</span>
}
}
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4.IKçƒ­æ›´æ–°</strong><br> æ¯æ¬¡éƒ½æ˜¯åœ¨esçš„æ‰©å±•è¯å…¸ä¸­ï¼Œæ‰‹åŠ¨æ·»åŠ æ–°è¯è¯­ï¼Œå¾ˆå‘</p><p>ï¼ˆ1ï¼‰æ¯æ¬¡æ·»åŠ å®Œï¼Œéƒ½è¦é‡å¯esæ‰èƒ½ç”Ÿæ•ˆï¼Œéå¸¸éº»çƒ¦</p><p>ï¼ˆ2ï¼‰esæ˜¯åˆ†å¸ƒå¼çš„ï¼Œå¯èƒ½æœ‰æ•°ç™¾ä¸ªèŠ‚ç‚¹ï¼Œä½ ä¸èƒ½æ¯æ¬¡éƒ½ä¸€ä¸ªä¸€ä¸ªèŠ‚ç‚¹ä¸Šé¢å»ä¿®æ”¹</p><p>esä¸åœæœºï¼Œç›´æ¥æˆ‘ä»¬åœ¨å¤–éƒ¨æŸä¸ªåœ°æ–¹æ·»åŠ æ–°çš„è¯è¯­ï¼Œesä¸­ç«‹å³çƒ­åŠ è½½åˆ°è¿™äº›æ–°è¯è¯­<br> IKAnalyzer.cfg.xml</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&lt;</span>properties<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token keyword">comment</span><span class="token operator">&gt;</span>IK Analyzer æ‰©å±•é…ç½®<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">comment</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•å­—å…¸ --&gt;</span>
	<span class="token operator">&lt;</span>entry <span class="token keyword">key</span><span class="token operator">=</span><span class="token string">&quot;ext_dict&quot;</span><span class="token operator">&gt;</span>location<span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•åœæ­¢è¯å­—å…¸--&gt;</span>
	<span class="token operator">&lt;</span>entry <span class="token keyword">key</span><span class="token operator">=</span><span class="token string">&quot;ext_stopwords&quot;</span><span class="token operator">&gt;</span>location<span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è¿œç¨‹æ‰©å±•å­—å…¸ --&gt;</span>
	<span class="token operator">&lt;</span>entry <span class="token keyword">key</span><span class="token operator">=</span><span class="token string">&quot;remote_ext_dict&quot;</span><span class="token operator">&gt;</span>words_location<span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">&gt;</span> 
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è¿œç¨‹æ‰©å±•åœæ­¢è¯å­—å…¸--&gt;</span>
	<span class="token operator">&lt;</span>entry <span class="token keyword">key</span><span class="token operator">=</span><span class="token string">&quot;remote_ext_stopwords&quot;</span><span class="token operator">&gt;</span>words_location<span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>properties<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-esè¯„åˆ†æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_4-esè¯„åˆ†æœºåˆ¶" aria-hidden="true">#</a> 4.esè¯„åˆ†æœºåˆ¶</h2><p>å½“ä½ é€šè¿‡å…³é”®å­—æœç´¢ç›¸å…³æ–‡æ¡£æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å¤šä¸ªæ–‡æ¡£ï¼Œè¿™äº›æ–‡æ¡£çš„é¡ºåºæ˜¯é€šè¿‡ä¸€ä¸ªmax_scoreå±æ€§çš„å¤§å°ä»é«˜åˆ°ä½é¡ºåºå±•ç°å‡ºæ¥çš„ï¼Œmax_scoreå±æ€§å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„è¯„åˆ†ã€‚</p><h3 id="_1-æ‰“åˆ†ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_1-æ‰“åˆ†ç®—æ³•" aria-hidden="true">#</a> 1.æ‰“åˆ†ç®—æ³•</h3><p>relevance scoreç®—æ³•ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯è®¡ç®—å‡ºï¼Œä¸€ä¸ªç´¢å¼•ä¸­çš„æ–‡æœ¬ï¼Œä¸æœç´¢æ–‡æœ¬ï¼Œä»–ä»¬ä¹‹é—´çš„å…³è”åŒ¹é…ç¨‹åº¦</p><p>Elasticsearchä½¿ç”¨çš„æ˜¯ term frequency/inverse document frequencyç®—æ³•ï¼Œç®€ç§°ä¸ºTF/IDFç®—æ³•</p><h3 id="æ€»å…¬å¼" tabindex="-1"><a class="header-anchor" href="#æ€»å…¬å¼" aria-hidden="true">#</a> æ€»å…¬å¼</h3><p>max_score = boost * idf * tf</p><figure><img src="/assets/img_118-pxKh-snJ.png" alt="img_118.png" tabindex="0" loading="lazy"><figcaption>img_118.png</figcaption></figure><p>å¯¹äºæŸ¥è¯¢æƒé‡æˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰</p><p>å¦‚ä¸‹é¢æ‰€ç¤ºï¼š</p><figure><img src="/assets/img_119-_TU3xu5G.png" alt="img_119.png" tabindex="0" loading="lazy"><figcaption>img_119.png</figcaption></figure><h3 id="_1-tfç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_1-tfç®—æ³•" aria-hidden="true">#</a> 1.TFç®—æ³•</h3><p>Term frequencyï¼šæœç´¢æ–‡æœ¬ä¸­çš„å„ä¸ªè¯æ¡åœ¨fieldæ–‡æœ¬ä¸­å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œå‡ºç°æ¬¡æ•°è¶Šå¤šï¼Œå°±è¶Šç›¸å…³</p><ul><li>æœç´¢è¯·æ±‚ï¼šhello world</li><li>doc1ï¼šhello you, and world is very good</li><li>doc2ï¼šhello, how are you</li></ul><p>doc1è¿™ä¸ªæ–‡æ¡£åŒ¹é…äº†2ä¸ªå•è¯ï¼Œæ‰€ä»¥doc1çš„å¾—åˆ†è¦é«˜ä¸€äº›ã€‚</p><p>2.IDFç®—æ³•<br> Inverse document frequencyï¼šæœç´¢æ–‡æœ¬ä¸­çš„å„ä¸ªè¯æ¡åœ¨æ•´ä¸ªç´¢å¼•çš„æ‰€æœ‰æ–‡æ¡£ä¸­å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œå‡ºç°çš„æ¬¡æ•°è¶Šå¤šï¼Œå°±è¶Šä¸ç›¸å…³</p><ul><li>æœç´¢è¯·æ±‚ï¼šhello world</li><li>doc1ï¼šhello, tuling is very good</li><li>doc2ï¼šhi world, how are you</li></ul><p>æ¯”å¦‚è¯´ï¼Œåœ¨indexä¸­æœ‰1ä¸‡æ¡documentï¼Œhelloè¿™ä¸ªå•è¯åœ¨æ‰€æœ‰çš„documentä¸­ï¼Œä¸€å…±å‡ºç°äº†1000æ¬¡ï¼›worldè¿™ä¸ªå•è¯åœ¨æ‰€æœ‰çš„documentä¸­ï¼Œä¸€å…±å‡ºç°äº†100æ¬¡ï¼Œæ‰€ä»¥worldè¿™ä¸ªå•è¯å¾—åˆ†å°±æ›´é«˜ã€‚</p><p>é‚£ä¹ˆåŒ¹é…worldçš„docå¾—åˆ†å°±è¶Šé«˜,è¶Šæœ‰å¯èƒ½æ’åœ¨æœç´¢ç»“æœå‰é¢ã€‚</p><p>Field-length normï¼šfieldé•¿åº¦ï¼Œfieldè¶Šé•¿ï¼Œç›¸å…³åº¦è¶Šå¼±<br> æœç´¢è¯·æ±‚ï¼šhello world</p><ul><li title:helloarticle,content:......Nä¸ªå•è¯="">doc1ï¼š</li><li title:myarticle,content:......Nä¸ªå•è¯ï¼Œhiworld="">doc2ï¼š</li></ul><p>hello worldåœ¨æ•´ä¸ªindexä¸­å‡ºç°çš„æ¬¡æ•°æ˜¯ä¸€æ ·å¤šçš„ï¼Œé‚£ä¹ˆdoc1æ›´ç›¸å…³ï¼Œtitle fieldæ›´çŸ­</p><p><strong>2.ç©ºé—´å‘é‡æ¨¡å‹ï¼ˆvector space modelï¼‰</strong></p><p>æ¯ä¸ªdoc vectorè®¡ç®—å‡ºå¯¹query vectorçš„å¼§åº¦ï¼Œæœ€ååŸºäºè¿™ä¸ªå¼§åº¦ç»™å‡ºä¸€ä¸ªdocç›¸å¯¹äºqueryä¸­å¤šä¸ªtermçš„æ€»åˆ†æ•°</p><p>å¼§åº¦è¶Šå¤§ï¼Œåˆ†æ•°æœˆåº•; å¼§åº¦è¶Šå°ï¼Œåˆ†æ•°è¶Šé«˜</p><p>å¦‚æœæ˜¯å¤šä¸ªtermï¼Œé‚£ä¹ˆå°±æ˜¯çº¿æ€§ä»£æ•°æ¥è®¡ç®—ï¼Œæ— æ³•ç”¨å›¾è¡¨ç¤º</p><figure><img src="/assets/img_120-LQaX_5Nt.png" alt="img_120.png" tabindex="0" loading="lazy"><figcaption>img_120.png</figcaption></figure><p>äº†è§£å³å¯ï¼ŒæŒæ¡å¯¹åº”çš„æ‰“åˆ†ç®—æ³•æˆ‘è‡ªå·±è®¤ä¸ºå°±è¶³å¤Ÿäº†ï¼Œä¸ç”¨ç –ç‰›è§’å°–</p><h2 id="ä¸‰ã€elasticsearchæ¶æ„è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€elasticsearchæ¶æ„è®¾è®¡" aria-hidden="true">#</a> ä¸‰ã€ElasticSearchæ¶æ„è®¾è®¡</h2><h3 id="_1-esé›†ç¾¤æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_1-esé›†ç¾¤æ¶æ„" aria-hidden="true">#</a> 1.esé›†ç¾¤æ¶æ„</h3><p>å¦‚ä¸‹å›¾ ï¼Œå°±æ˜¯ä¸€ä¸ªä¸‰ä¸ªèŠ‚ç‚¹ç»„æˆçš„esé›†ç¾¤ï¼Œp0ã€p1ã€p2è¡¨ç¤ºä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„åˆ†ç‰‡ï¼ŒR0ã€R1ã€R2è¡¨ç¤ºåˆ†ç‰‡å¯¹åº”çš„å‰¯æœ¬<br><img src="/assets/img_121-_jLrGSFs.png" alt="img_121.png" loading="lazy"><br> åœ¨Elasticsearchä¸»è¦åˆ†æˆä¸¤ç±»èŠ‚ç‚¹ï¼Œä¸€ç±»æ˜¯Masterï¼Œä¸€ç±»æ˜¯DataNodeã€‚</p><h3 id="_1-masterèŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#_1-masterèŠ‚ç‚¹" aria-hidden="true">#</a> 1.MasterèŠ‚ç‚¹</h3><p>åœ¨Elasticsearchå¯åŠ¨æ—¶ï¼Œä¼šé€‰ä¸¾å‡ºæ¥ä¸€ä¸ªMasterèŠ‚ç‚¹ã€‚</p><p>å½“æŸä¸ªèŠ‚ç‚¹å¯åŠ¨åï¼Œç„¶åä½¿ç”¨Zen Discoveryæœºåˆ¶æ‰¾åˆ°é›†ç¾¤ä¸­çš„å…¶ä»–èŠ‚ç‚¹ï¼Œå¹¶å»ºç«‹è¿æ¥ã€‚</p><p>discovery.seed_hosts: [â€œ192.168.21.130â€, â€œ192.168.21.131â€, â€œ192.168.21.132â€]</p><p>å¹¶ä»å€™é€‰ä¸»èŠ‚ç‚¹ä¸­é€‰ä¸¾å‡ºä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚</p><p>cluster.initial_master_nodes: [â€œnode1â€, â€œnode2â€,â€œnode3â€]</p><p>MasterèŠ‚ç‚¹ä¸»è¦è´Ÿè´£</p><ul><li>ç®¡ç†ç´¢å¼•ï¼ˆåˆ›å»ºç´¢å¼•ã€åˆ é™¤ç´¢å¼•ï¼‰ã€åˆ†é…åˆ†ç‰‡</li><li>ç»´æŠ¤å…ƒæ•°æ®</li><li>ç®¡ç†é›†ç¾¤èŠ‚ç‚¹çŠ¶æ€</li><li>ä¸è´Ÿè´£æ•°æ®å†™å…¥å’ŒæŸ¥è¯¢ï¼Œæ¯”è¾ƒè½»é‡çº§</li></ul><p>ä¸€ä¸ªElasticsearché›†ç¾¤ä¸­ï¼Œåªæœ‰ä¸€ä¸ªMasterèŠ‚ç‚¹ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå†…å­˜å¯ä»¥ç›¸å¯¹å°ä¸€ç‚¹ï¼Œä½†æœºå™¨è¦ç¨³å®šã€‚</p><h3 id="_2-datanodeèŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#_2-datanodeèŠ‚ç‚¹" aria-hidden="true">#</a> 2.DataNodeèŠ‚ç‚¹</h3><p>åœ¨Elasticsearché›†ç¾¤ä¸­ï¼Œä¼šæœ‰Nä¸ªDataNodeèŠ‚ç‚¹ã€‚</p><p>DataNodeèŠ‚ç‚¹ä¸»è¦è´Ÿè´£ï¼š</p><p>æ•°æ®å†™å…¥ã€æ•°æ®æ£€ç´¢ï¼Œ</p><p>å¤§éƒ¨åˆ†Elasticsearchçš„å‹åŠ›éƒ½åœ¨DataNodeèŠ‚ç‚¹ä¸Šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå†…å­˜æœ€å¥½é…ç½®å¤§ä¸€äº›</p><h3 id="_3-åˆ†ç‰‡" tabindex="-1"><a class="header-anchor" href="#_3-åˆ†ç‰‡" aria-hidden="true">#</a> 3.åˆ†ç‰‡</h3><p>Elasticsearchæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æœç´¢å¼•æ“ï¼Œç´¢å¼•çš„æ•°æ®ä¹Ÿæ˜¯åˆ†æˆè‹¥å¹²éƒ¨åˆ†ï¼Œåˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡å™¨èŠ‚ç‚¹ä¸­ï¼Œåˆ†å¸ƒåœ¨ä¸åŒæœåŠ¡å™¨èŠ‚ç‚¹ä¸­çš„ç´¢å¼•æ•°æ®ï¼Œå°±æ˜¯åˆ†ç‰‡ï¼ˆShardï¼‰ã€‚</p><p>Elasticsearchä¼šè‡ªåŠ¨ç®¡ç†åˆ†ç‰‡ï¼Œå¦‚æœå‘ç°åˆ†ç‰‡åˆ†å¸ƒä¸å‡è¡¡ï¼Œå°±ä¼šè‡ªåŠ¨è¿ç§»ä¸€ä¸ªç´¢å¼•ï¼ˆindexï¼‰ç”±å¤šä¸ªshardï¼ˆåˆ†ç‰‡ï¼‰ç»„æˆï¼Œè€Œåˆ†ç‰‡æ˜¯åˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šçš„.</p><h3 id="_4-å‰¯æœ¬" tabindex="-1"><a class="header-anchor" href="#_4-å‰¯æœ¬" aria-hidden="true">#</a> 4.å‰¯æœ¬</h3><p>ä¸ºäº†å¯¹Elasticsearchçš„åˆ†ç‰‡è¿›è¡Œå®¹é”™ï¼Œå‡è®¾æŸä¸ªèŠ‚ç‚¹ä¸å¯ç”¨ï¼Œä¼šå¯¼è‡´æ•´ä¸ªç´¢å¼•åº“éƒ½å°†ä¸å¯ç”¨ã€‚æ‰€ä»¥ï¼Œéœ€è¦å¯¹åˆ†ç‰‡è¿›è¡Œå‰¯æœ¬å®¹é”™ï¼Œæ¯ä¸€ä¸ªåˆ†ç‰‡éƒ½ä¼šæœ‰å¯¹åº”çš„å‰¯æœ¬ã€‚</p><p>åœ¨Elasticsearchä¸­ï¼Œé»˜è®¤åˆ›å»ºçš„ç´¢å¼•ä¸º1ä¸ªåˆ†ç‰‡ã€æ¯ä¸ªåˆ†ç‰‡æœ‰1ä¸ªä¸»åˆ†ç‰‡å’Œ1ä¸ªå‰¯æœ¬åˆ†ç‰‡ã€‚</p><p>æ¯ä¸ªåˆ†ç‰‡éƒ½ä¼šæœ‰ä¸€ä¸ªPrimary Shardï¼ˆä¸»åˆ†ç‰‡ï¼‰ï¼Œä¹Ÿä¼šæœ‰è‹¥å¹²ä¸ªReplica Shardï¼ˆå‰¯æœ¬åˆ†ç‰‡ï¼‰</p><p>Primary Shardå’ŒReplica Shardä¸åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p><h2 id="_2-esé›†ç¾¤è¯»å†™æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-esé›†ç¾¤è¯»å†™æµç¨‹" aria-hidden="true">#</a> 2.esé›†ç¾¤è¯»å†™æµç¨‹</h2><h3 id="_1-es-å†™æ•°æ®æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-es-å†™æ•°æ®æµç¨‹" aria-hidden="true">#</a> <a href="http://1.es" target="_blank" rel="noopener noreferrer">1.es<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å†™æ•°æ®æµç¨‹</h3><figure><img src="/assets/img_122-aJrnK6i8.png" alt="img_122.png" tabindex="0" loading="lazy"><figcaption>img_122.png</figcaption></figure><p>1.é€‰æ‹©ä»»æ„ä¸€ä¸ªDataNodeå‘é€è¯·æ±‚ï¼Œä¾‹å¦‚ï¼šnode2ã€‚æ­¤æ—¶ï¼Œnode2å°±æˆä¸ºä¸€ä¸ªcoordinating nodeï¼ˆåè°ƒèŠ‚ç‚¹ï¼‰</p><p>2.è®¡ç®—å¾—åˆ°æ–‡æ¡£è¦å†™å…¥çš„åˆ†ç‰‡</p><p><code>shard = hash(routing) % number_of_primary_shards</code><br> routing æ˜¯ä¸€ä¸ªå¯å˜å€¼ï¼Œé»˜è®¤æ˜¯æ–‡æ¡£çš„ _id</p><p>3.coordinating nodeä¼šè¿›è¡Œè·¯ç”±ï¼Œå°†è¯·æ±‚è½¬å‘ç»™å¯¹åº”çš„primary shardæ‰€åœ¨çš„DataNodeï¼ˆå‡è®¾primary shardåœ¨node1ã€replica shardåœ¨node2ï¼‰</p><p>4.node1èŠ‚ç‚¹ä¸Šçš„Primary Shardå¤„ç†è¯·æ±‚ï¼Œå†™å…¥æ•°æ®åˆ°ç´¢å¼•åº“ä¸­ï¼Œå¹¶å°†æ•°æ®åŒæ­¥åˆ°Replica shard</p><p>5.Primary Shardå’ŒReplica Shardéƒ½ä¿å­˜å¥½äº†æ–‡æ¡£ï¼Œè¿”å›client</p><h3 id="_2-es-è¯»æ•°æ®æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-es-è¯»æ•°æ®æµç¨‹" aria-hidden="true">#</a> <a href="http://2.es" target="_blank" rel="noopener noreferrer">2.es<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¯»æ•°æ®æµç¨‹</h3><figure><img src="/assets/img_123-pXmENZTp.png" alt="img_123.png" tabindex="0" loading="lazy"><figcaption>img_123.png</figcaption></figure><p>1.clientå‘èµ·æŸ¥è¯¢è¯·æ±‚ï¼ŒæŸä¸ªDataNodeæ¥æ”¶åˆ°è¯·æ±‚ï¼Œè¯¥DataNodeå°±ä¼šæˆä¸ºåè°ƒèŠ‚ç‚¹ï¼ˆCoordinating Nodeï¼‰</p><p>2.åè°ƒèŠ‚ç‚¹ï¼ˆCoordinating Nodeï¼‰å°†æŸ¥è¯¢è¯·æ±‚å¹¿æ’­åˆ°æ¯ä¸€ä¸ªæ•°æ®èŠ‚ç‚¹ï¼Œè¿™äº›æ•°æ®èŠ‚ç‚¹çš„åˆ†ç‰‡ä¼šå¤„ç†è¯¥æŸ¥è¯¢è¯·æ±‚</p><p>3.æ¯ä¸ªåˆ†ç‰‡è¿›è¡Œæ•°æ®æŸ¥è¯¢ï¼Œå°†ç¬¦åˆæ¡ä»¶çš„æ•°æ®æ”¾åœ¨ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œå¹¶å°†è¿™äº›æ•°æ®çš„æ–‡æ¡£IDã€èŠ‚ç‚¹ä¿¡æ¯ã€åˆ†ç‰‡ä¿¡æ¯è¿”å›ç»™åè°ƒèŠ‚ç‚¹</p><p>4.åè°ƒèŠ‚ç‚¹å°†æ‰€æœ‰çš„ç»“æœè¿›è¡Œæ±‡æ€»ï¼Œå¹¶è¿›è¡Œå…¨å±€æ’åº</p><p>5.åè°ƒèŠ‚ç‚¹å‘åŒ…å«è¿™äº›æ–‡æ¡£IDçš„åˆ†ç‰‡å‘é€getè¯·æ±‚ï¼Œå¯¹åº”çš„åˆ†ç‰‡å°†æ–‡æ¡£æ•°æ®è¿”å›ç»™åè°ƒèŠ‚ç‚¹ï¼Œæœ€ååè°ƒèŠ‚ç‚¹å°†æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯</p><p>æ³¨æ„ï¼šå†™è¯·æ±‚æ˜¯å†™å…¥ primary shardï¼Œç„¶ååŒæ­¥ç»™æ‰€æœ‰çš„ replica shardï¼›è¯»è¯·æ±‚å¯ä»¥ä» primary shard æˆ– replica shard è¯»å–ï¼Œé‡‡ç”¨çš„æ˜¯éšæœºè½®è¯¢ç®—æ³•ã€‚</p><p>è‡ªå·±æ€»ç»“ï¼šesçš„æ£€ç´¢æµç¨‹å’Œmysqlæ•°æ®è¡¨æŸ¥è¯¢éä¸»é”®ç´¢å¼•çš„æ€è·¯æœ‰äº›ç›¸ä¼¼ï¼Œå…ˆä»ç´¢å¼•è¡¨æŸ¥è¯¢å‡ºå¯¹åº”çš„ä¸»é”®ç´¢å¼•å€¼ï¼Œåœ¨è¿›è¡Œå›è¡¨æŸ¥è¯¢å…·ä½“çš„è¡Œæ•°æ®ã€‚</p><h3 id="_3-esåˆ é™¤-æ›´æ–°æ•°æ®åº•å±‚åŸç†" tabindex="-1"><a class="header-anchor" href="#_3-esåˆ é™¤-æ›´æ–°æ•°æ®åº•å±‚åŸç†" aria-hidden="true">#</a> 3.esåˆ é™¤/æ›´æ–°æ•°æ®åº•å±‚åŸç†</h3><p>å¦‚æœæ˜¯åˆ é™¤æ“ä½œï¼Œcommit çš„æ—¶å€™ä¼šç”Ÿæˆä¸€ä¸ª .del æ–‡ä»¶ï¼Œé‡Œé¢å°†æŸä¸ª doc æ ‡è¯†ä¸º deleted çŠ¶æ€ï¼Œé‚£ä¹ˆæœç´¢çš„æ—¶å€™æ ¹æ® .del æ–‡ä»¶å°±çŸ¥é“è¿™ä¸ª doc æ˜¯å¦è¢«åˆ é™¤äº†ã€‚</p><p>å¦‚æœæ˜¯æ›´æ–°æ“ä½œï¼Œå°±æ˜¯å°†åŸæ¥çš„ doc æ ‡è¯†ä¸º deleted çŠ¶æ€ï¼Œç„¶åæ–°å†™å…¥ä¸€æ¡æ•°æ®ã€‚</p><h2 id="_3-es-åº•å±‚å†™æ•°æ®åŸç†" tabindex="-1"><a class="header-anchor" href="#_3-es-åº•å±‚å†™æ•°æ®åŸç†" aria-hidden="true">#</a> <a href="http://3.es" target="_blank" rel="noopener noreferrer">3.es<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> åº•å±‚å†™æ•°æ®åŸç†</h2><figure><img src="/assets/img_124-824EC1bO.png" alt="img_124.png" tabindex="0" loading="lazy"><figcaption>img_124.png</figcaption></figure><p>ç®€è¿°ï¼šå…ˆå†™å…¥å†…å­˜ bufferï¼Œåœ¨ buffer é‡Œçš„æ—¶å€™æ•°æ®æ˜¯æœç´¢ä¸åˆ°çš„ï¼›ç„¶ååˆ·æ–°åˆ°os cacheä¸­ï¼ˆåŒæ—¶å°†æ•°æ®å¤‡ä»½åˆ°translogæ—¥å¿—æ–‡ä»¶ï¼‰ï¼Œæœ€ååˆ·æ–°åˆ° segment fileç£ç›˜æ–‡ä»¶ä¸­</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œæ•°æ®å…ˆå†™å…¥å†…å­˜ bufferï¼Œç„¶åæ¯éš” 1sï¼Œå°†æ•°æ® refresh åˆ° os cacheï¼Œåˆ°äº† os cache æ•°æ®å°±èƒ½è¢«æœç´¢åˆ°ï¼ˆæ‰€ä»¥æˆ‘ä»¬æ‰è¯´ es ä»å†™å…¥åˆ°èƒ½è¢«æœç´¢åˆ°ï¼Œä¸­é—´æœ‰ 1s çš„å»¶è¿Ÿï¼‰ã€‚æ¯éš” 5sï¼Œå°†æ•°æ®å†™å…¥ translog æ–‡ä»¶ä½œå¤‡ä»½ï¼ˆè¿™æ ·å¦‚æœæœºå™¨å®•æœºï¼Œå†…å­˜æ•°æ®å…¨æ²¡ï¼Œæœ€å¤šä¼šæœ‰ 5s çš„æ•°æ®ä¸¢å¤±ï¼‰ï¼Œtranslog å¤§åˆ°ä¸€å®šç¨‹åº¦ï¼Œæˆ–è€…é»˜è®¤æ¯éš” 30minsï¼Œä¼šè§¦å‘ commit æ“ä½œï¼Œå°†ç¼“å†²åŒºçš„æ•°æ®éƒ½ flush åˆ° segment file ç£ç›˜æ–‡ä»¶ä¸­ã€‚æœ€åå­˜å…¥åˆ°commit pointç£ç›˜æ–‡ä»¶ä¸­ã€‚</p><h3 id="_1-refreshåˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_1-refreshåˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜" aria-hidden="true">#</a> 1.refreshåˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜</h3><p>å½“æ•°æ®å†™å…¥åˆ°ESåˆ†ç‰‡æ—¶ï¼Œä¼šé¦–å…ˆå†™å…¥åˆ°å†…å­˜ä¸­ï¼Œç„¶åé€šè¿‡å†…å­˜çš„bufferç”Ÿæˆä¸€ä¸ªsegmentï¼Œå¹¶åˆ·åˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ä¸­ã€‚</p><p>å¦‚æœ buffer å¿«æ»¡äº†ï¼Œæˆ–è€…åˆ°ä¸€å®šæ—¶é—´ï¼Œå°±ä¼šå°†å†…å­˜ buffer æ•°æ® refresh åˆ°ä¸€ä¸ªæ–°çš„ segment fileä¸­ï¼Œä½†æ˜¯æ­¤æ—¶æ•°æ®ä¸æ˜¯ç›´æ¥è¿›å…¥ segment file ç£ç›˜æ–‡ä»¶ï¼Œè€Œæ˜¯å…ˆè¿›å…¥ os cache ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ refresh ã€‚</p><p>åªè¦ buffer ä¸­çš„æ•°æ®è¢« refresh æ“ä½œåˆ·å…¥ os cache ä¸­ï¼Œè¿™ä¸ªæ•°æ®å°±å¯ä»¥è¢«æœç´¢åˆ°äº†ã€‚</p><p>å®šæ—¶ refreshåˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜æœºåˆ¶</p><p>æ¯éš” 1 ç§’é’Ÿï¼Œes å°† buffer ä¸­çš„æ•°æ®å†™å…¥ä¸€ä¸ªæ–°çš„ segment file ï¼Œæ¯ç§’é’Ÿä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ç£ç›˜æ–‡ä»¶ segment file ï¼Œè¿™ä¸ª segment file ä¸­å°±å­˜å‚¨æœ€è¿‘ 1 ç§’å†… buffer ä¸­å†™å…¥çš„æ•°æ®ã€‚<br> ä½†æ˜¯å¦‚æœ buffer é‡Œé¢æ­¤æ—¶æ²¡æœ‰æ•°æ®ï¼Œé‚£å½“ç„¶ä¸ä¼šæ‰§è¡Œ refresh æ“ä½œï¼Œå¦‚æœ buffer é‡Œé¢æœ‰æ•°æ®ï¼Œé»˜è®¤ 1 ç§’é’Ÿæ‰§è¡Œä¸€æ¬¡ refresh æ“ä½œï¼Œåˆ·å…¥ä¸€ä¸ªæ–°çš„ segment file ä¸­ã€‚</p><p>segment fileåˆå¹¶</p><p>buffer æ¯ refresh ä¸€æ¬¡ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ª segment file ï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹æ˜¯ 1 ç§’é’Ÿä¸€ä¸ª segment file ï¼Œè¿™æ ·ä¸‹æ¥ segment file ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ­¤æ—¶ä¼šå®šæœŸæ‰§è¡Œ mergeï¼Œå‡å°‘ç´¢å¼•æŸ¥è¯¢æ—¶IOå¼€é”€ã€‚<br> æ¯æ¬¡ merge çš„æ—¶å€™ï¼Œä¼šå°†å¤šä¸ª segment file åˆå¹¶æˆä¸€ä¸ªï¼ŒåŒæ—¶è¿™é‡Œä¼šå°†æ ‡è¯†ä¸º deleted çš„ doc ç»™ç‰©ç†åˆ é™¤æ‰ï¼ˆä¹‹å‰æ‰§è¡Œè¿‡çš„deleteçš„æ•°æ®ï¼‰ï¼Œç„¶åå°†æ–°çš„ segment file å†™å…¥åˆ°ä¸€ä¸ª commit pointç£ç›˜ ã€‚</p><p>çŸ¥è¯†æ‰©å±•</p><p>æ“ä½œç³»ç»Ÿé‡Œé¢ï¼Œç£ç›˜æ–‡ä»¶å…¶å®éƒ½æœ‰ä¸€ä¸ªä¸œè¥¿ï¼Œå«åš os cache ï¼Œå³æ“ä½œç³»ç»Ÿç¼“å­˜ï¼Œå°±æ˜¯è¯´æ•°æ®å†™å…¥ç£ç›˜æ–‡ä»¶ä¹‹å‰ï¼Œä¼šå…ˆè¿›å…¥ os cache ï¼Œå…ˆè¿›å…¥æ“ä½œç³»ç»Ÿçº§åˆ«çš„ä¸€ä¸ªå†…å­˜ç¼“å­˜ä¸­å»ã€‚</p><h3 id="_2-å¤‡ä»½åˆ°translogç£ç›˜" tabindex="-1"><a class="header-anchor" href="#_2-å¤‡ä»½åˆ°translogç£ç›˜" aria-hidden="true">#</a> 2.å¤‡ä»½åˆ°translogç£ç›˜</h3><p>åˆ·æ–°åˆ°translogæ–‡ä»¶ä»¥ä¿éšœæ•°æ®ä¸ä¸¢å¤±ï¼Œtranslogçš„è®¾è®¡æ€æƒ³å’Œmysqlçš„redo logæ˜¯ç›¸ä¼¼çš„ã€‚</p><p>æ¯éš”5s,ä»os cache ä¸­åŒæ­¥åˆ°translogç£ç›˜é‡Œé¢å»åšå¤‡ä»½ã€‚</p><p>é‚£ä¹ˆtranslog æ—¥å¿—æ–‡ä»¶çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ä½ æ‰§è¡Œ commit æ“ä½œä¹‹å‰ï¼Œæ•°æ®è¦ä¹ˆæ˜¯åœç•™åœ¨ buffer ä¸­ï¼Œè¦ä¹ˆæ˜¯åœç•™åœ¨ os cache ä¸­ï¼Œæ— è®ºæ˜¯ buffer è¿˜æ˜¯ os cache éƒ½æ˜¯å†…å­˜ï¼Œä¸€æ—¦è¿™å°æœºå™¨æ­»äº†ï¼Œå†…å­˜ä¸­çš„æ•°æ®å°±å…¨ä¸¢äº†ã€‚æ‰€ä»¥éœ€è¦å°†æ•°æ®å¯¹åº”çš„æ“ä½œå†™å…¥ä¸€ä¸ªä¸“é—¨çš„æ—¥å¿—æ–‡ä»¶ translog ä¸­ï¼Œä¸€æ—¦æ­¤æ—¶æœºå™¨å®•æœºï¼Œå†æ¬¡é‡å¯çš„æ—¶å€™ï¼Œes ä¼šè‡ªåŠ¨è¯»å– translog æ—¥å¿—æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œæ¢å¤åˆ°å†…å­˜ buffer å’Œ os cache ä¸­å»ã€‚</p><h3 id="_3-flushåˆ°ç£ç›˜æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-flushåˆ°ç£ç›˜æ–‡ä»¶" aria-hidden="true">#</a> 3.flushåˆ°ç£ç›˜æ–‡ä»¶</h3><p>é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œæ–°çš„æ•°æ®ä¸æ–­è¿›å…¥ buffer å’Œ translogï¼Œä¸æ–­å°† buffer æ•°æ®å†™å…¥ä¸€ä¸ªåˆä¸€ä¸ªæ–°çš„ segment fileæ–‡ä»¶ç³»ç»Ÿç¼“å­˜ä¸­å»ï¼Œæ¯æ¬¡ refresh å®Œ buffer æ¸…ç©ºï¼Œtranslog ä¿ç•™ã€‚éšç€è¿™ä¸ªè¿‡ç¨‹æ¨è¿›ï¼Œtranslog ä¼šå˜å¾—è¶Šæ¥è¶Šå¤§ã€‚å½“ translog è¾¾åˆ°ä¸€å®šé•¿åº¦çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ commit æ“ä½œã€‚</p><p>æ•°æ®æœ€ç»ˆè¢«flushåˆ°ç£ç›˜æ–‡ä»¶å°±å®Œæˆäº†æ•°æ®çš„æœ€ç»ˆå½’å®¿ã€‚</p><figure><img src="/assets/img_125-cgDIgNM7.png" alt="img_125.png" tabindex="0" loading="lazy"><figcaption>img_125.png</figcaption></figure><p>commitæ“ä½œæµç¨‹</p><p>commit æ“ä½œé¦–å…ˆå°±æ˜¯å°† buffer ä¸­ç°æœ‰æ•°æ® refresh åˆ° os cache ä¸­å»ï¼Œæ¸…ç©º bufferã€‚<br> ç„¶åï¼Œå°†ä¸€ä¸ª commit point å†™å…¥ç£ç›˜æ–‡ä»¶ï¼Œé‡Œé¢æ ‡è¯†ç€è¿™ä¸ª commit point å¯¹åº”çš„æ‰€æœ‰ segment file ï¼ŒåŒæ—¶å¼ºè¡Œå°† os cache ä¸­ç›®å‰æ‰€æœ‰çš„æ•°æ®éƒ½ fsync åˆ°ç£ç›˜æ–‡ä»¶ä¸­å»ã€‚<br> æœ€åæ¸…ç©º ç°æœ‰ translog æ—¥å¿—æ–‡ä»¶ï¼Œé‡å¯ä¸€ä¸ª translogï¼Œæ­¤æ—¶ commit æ“ä½œå®Œæˆã€‚</p><p>è¿™ä¸ª commit æ“ä½œå«åš flush ã€‚</p><p>é»˜è®¤ 30 åˆ†é’Ÿè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ flush ï¼Œå°†æ–‡ä»¶ç³»ç»Ÿç¼“å­˜çš„æ•°æ®åˆ·å…¥åˆ°ç£ç›˜ã€‚<br> ä½†å¦‚æœ translog è¿‡å¤§ï¼Œä¹Ÿä¼šè§¦å‘ flush ã€‚</p><p>flush æ“ä½œå°±å¯¹åº”ç€ commit çš„å…¨è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ es apiï¼Œæ‰‹åŠ¨æ‰§è¡Œ flush æ“ä½œï¼Œæ‰‹åŠ¨å°† os cache ä¸­çš„æ•°æ® fsync å¼ºåˆ·åˆ°ç£ç›˜ä¸Šå»ã€‚</p><h2 id="_4-eså‡†å®æ—¶æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_4-eså‡†å®æ—¶æœºåˆ¶" aria-hidden="true">#</a> 4.eså‡†å®æ—¶æœºåˆ¶</h2><h3 id="_1-ä¸ºä»€ä¹ˆå«-es-æ˜¯å‡†å®æ—¶çš„" tabindex="-1"><a class="header-anchor" href="#_1-ä¸ºä»€ä¹ˆå«-es-æ˜¯å‡†å®æ—¶çš„" aria-hidden="true">#</a> 1.ä¸ºä»€ä¹ˆå« es æ˜¯å‡†å®æ—¶çš„ï¼Ÿ</h3><p>NRT ï¼Œå…¨ç§° near real-time ã€‚é»˜è®¤æ˜¯æ¯éš” 1 ç§’ refresh ä¸€æ¬¡çš„ï¼Œæ‰€ä»¥ es æ˜¯å‡†å®æ—¶çš„ï¼Œå› ä¸ºå†™å…¥çš„æ•°æ® 1 ç§’ä¹‹åæ‰èƒ½è¢«çœ‹åˆ°ã€‚</p><p>å¯ä»¥é€šè¿‡ es çš„ restful api æˆ–è€… java api ï¼Œæ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡ refresh æ“ä½œï¼Œå°±æ˜¯æ‰‹åŠ¨å°† buffer ä¸­çš„æ•°æ®åˆ·å…¥ os cache ä¸­ï¼Œè®©æ•°æ®ç«‹é©¬å°±å¯ä»¥è¢«æœç´¢åˆ°ã€‚åªè¦æ•°æ®è¢«è¾“å…¥ os cache ä¸­ï¼Œbuffer å°±ä¼šè¢«æ¸…ç©ºäº†ï¼Œå› ä¸ºä¸éœ€è¦ä¿ç•™ buffer äº†ï¼Œæ•°æ®åœ¨ translog é‡Œé¢å·²ç»æŒä¹…åŒ–åˆ°ç£ç›˜å»ä¸€ä»½äº†ã€‚</p><h3 id="_2-esä¼šæ•°æ®ä¸¢å¤±å—" tabindex="-1"><a class="header-anchor" href="#_2-esä¼šæ•°æ®ä¸¢å¤±å—" aria-hidden="true">#</a> 2.esä¼šæ•°æ®ä¸¢å¤±å—ï¼Ÿ</h3><p>å¯èƒ½ä¼šä¸¢å¤±æœ‰ 5 ç§’çš„æ•°æ®ï¼Œåœç•™åœ¨ bufferã€translog os cacheã€segment file os cache ä¸­ï¼Œè€Œä¸åœ¨ç£ç›˜ä¸Šï¼Œæ­¤æ—¶å¦‚æœå¤‡ä»½åˆ°translogè¿‡ç¨‹ä¸­å®•æœºï¼Œä¼šå¯¼è‡´ 5 ç§’çš„æ•°æ®ä¸¢å¤±ã€‚</p><p>translog å…¶å®ä¹Ÿæ˜¯å…ˆå†™å…¥ os cache çš„ï¼Œé»˜è®¤æ¯éš” 5 ç§’åˆ·ä¸€æ¬¡åˆ°ç£ç›˜ä¸­å»ï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯èƒ½æœ‰ 5 ç§’çš„æ•°æ®ä¼šä»…ä»…åœç•™åœ¨ buffer æˆ–è€… translog æ–‡ä»¶çš„ os cache ä¸­ï¼Œå¦‚æœæ­¤æ—¶æœºå™¨æŒ‚äº†ï¼Œä¼šä¸¢å¤± 5 ç§’é’Ÿçš„æ•°æ®ã€‚ä½†æ˜¯è¿™æ ·æ€§èƒ½æ¯”è¾ƒå¥½ï¼Œæœ€å¤šä¸¢ 5 ç§’çš„æ•°æ®ã€‚<br> ä¹Ÿå¯ä»¥å°† translog è®¾ç½®æˆæ¯æ¬¡å†™æ“ä½œå¿…é¡»æ˜¯ç›´æ¥ fsync åˆ°ç£ç›˜ï¼Œä½†æ˜¯æ€§èƒ½ä¼šå·®å¾ˆå¤šã€‚</p><h3 id="_5-esé›†ç¾¤è„‘è£‚" tabindex="-1"><a class="header-anchor" href="#_5-esé›†ç¾¤è„‘è£‚" aria-hidden="true">#</a> 5.esé›†ç¾¤è„‘è£‚</h3><p>å…³äºé›†ç¾¤è„‘è£‚çš„å®šä¹‰è¯·å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡åšæ–‡</p><p><a href="https://blog.csdn.net/sinat_34814635/article/details/129914369" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/sinat_34814635/article/details/129914369<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>é‚£ä¹ˆesæ˜¯å¦‚ä½•è§£å†³è„‘è£‚é—®é¢˜çš„ï¼Ÿ</p><p>esæ˜¯ç›´åˆ°æœ‰è¶³å¤Ÿçš„masterå€™é€‰èŠ‚ç‚¹æ—¶ï¼Œæ‰å¯ä»¥é€‰ä¸¾å‡ºä¸€ä¸ªmasterï¼Œå¦åˆ™å°±ä¸è¦é€‰ä¸¾å‡ºä¸€ä¸ªmasterã€‚</p><p>è¿™ä¸ªå‚æ•°å¿…é¡»è¢«è®¾ç½®ä¸ºé›†ç¾¤ä¸­masterå€™é€‰èŠ‚ç‚¹çš„quorumæ•°é‡ï¼Œä¹Ÿå°±æ˜¯å¤§å¤šæ•°ï¼Œè‡³äºquorumçš„ç®—æ³•ï¼Œå°±æ˜¯ï¼šmasterå€™é€‰èŠ‚ç‚¹æ•°é‡ / 2 + 1ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œä¸€ä¸ªç”Ÿäº§ç¯å¢ƒçš„esé›†ç¾¤ï¼Œè‡³å°‘è¦æœ‰3ä¸ªèŠ‚ç‚¹ï¼ŒåŒæ—¶å°†è¿™ä¸ªå‚æ•°è®¾ç½®ä¸ºquorumï¼Œä¹Ÿå°±æ˜¯2ã€‚discovery.zen.minimum_master_nodesè®¾ç½®ä¸º2</p><p>é‚£ä¹ˆè¿™ä¸ªæ˜¯å‚æ•°æ˜¯å¦‚ä½•é¿å…è„‘è£‚é—®é¢˜çš„äº§ç”Ÿçš„å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ä»¬æœ‰3ä¸ªèŠ‚ç‚¹ï¼Œquorumæ˜¯2.ç°åœ¨ç½‘ç»œæ•…éšœï¼Œ1ä¸ªèŠ‚ç‚¹åœ¨ä¸€ä¸ªç½‘ç»œåŒºåŸŸï¼Œå¦å¤–2ä¸ªèŠ‚ç‚¹åœ¨å¦å¤–ä¸€ä¸ªç½‘ç»œåŒºåŸŸï¼Œä¸åŒçš„ç½‘ç»œåŒºåŸŸå†…æ— æ³•é€šä¿¡ã€‚</p><p>è¿™ä¸ªæ—¶å€™æœ‰ä¸¤ç§æƒ…å†µæƒ…å†µï¼š</p><p>ï¼ˆ1ï¼‰å¦‚æœmasteræ˜¯å•ç‹¬çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œå¦å¤–2ä¸ªèŠ‚ç‚¹æ˜¯masterå€™é€‰èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ­¤æ—¶é‚£ä¸ªå•ç‹¬çš„masterèŠ‚ç‚¹å› ä¸ºæ²¡æœ‰æŒ‡å®šæ•°é‡çš„å€™é€‰master nodeåœ¨è‡ªå·±å½“å‰æ‰€åœ¨çš„é›†ç¾¤å†…ï¼Œå› æ­¤å°±ä¼šå–æ¶ˆå½“å‰masterçš„è§’è‰²ï¼Œå°è¯•é‡æ–°é€‰ä¸¾ï¼Œä½†æ˜¯æ— æ³•é€‰ä¸¾æˆåŠŸã€‚ç„¶åå¦å¤–ä¸€ä¸ªç½‘ç»œåŒºåŸŸå†…çš„nodeå› ä¸ºæ— æ³•è¿æ¥åˆ°masterï¼Œå°±ä¼šå‘èµ·é‡æ–°é€‰ä¸¾ï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªmasterå€™é€‰èŠ‚ç‚¹ï¼Œæ»¡è¶³äº†quorumï¼Œå› æ­¤å¯ä»¥æˆåŠŸé€‰ä¸¾å‡ºä¸€ä¸ªmasterã€‚æ­¤æ—¶é›†ç¾¤ä¸­å°±ä¼šè¿˜æ˜¯åªæœ‰ä¸€ä¸ªmasterã€‚</p><p>ï¼ˆ2ï¼‰å¦‚æœmasterå’Œå¦å¤–ä¸€ä¸ªnodeåœ¨ä¸€ä¸ªç½‘ç»œåŒºåŸŸå†…ï¼Œç„¶åä¸€ä¸ªnodeå•ç‹¬åœ¨ä¸€ä¸ªç½‘ç»œåŒºåŸŸå†…ã€‚é‚£ä¹ˆæ­¤æ—¶é‚£ä¸ªå•ç‹¬çš„nodeå› ä¸ºè¿æ¥ä¸ä¸Šmasterï¼Œä¼šå°è¯•å‘èµ·é€‰ä¸¾ï¼Œä½†æ˜¯å› ä¸ºmasterå€™é€‰èŠ‚ç‚¹æ•°é‡ä¸åˆ°quorumï¼Œå› æ­¤æ— æ³•é€‰ä¸¾å‡ºmasterã€‚è€Œå¦å¤–ä¸€ä¸ªç½‘ç»œåŒºåŸŸå†…ï¼ŒåŸå…ˆçš„é‚£ä¸ªmasterè¿˜ä¼šç»§ç»­å·¥ä½œã€‚è¿™ä¹Ÿå¯ä»¥ä¿è¯é›†ç¾¤å†…åªæœ‰ä¸€ä¸ªmasterèŠ‚ç‚¹ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œé›†ç¾¤ä¸­masterèŠ‚ç‚¹çš„æ•°é‡è‡³å°‘3å°ï¼Œä¸‰å°ä¸»èŠ‚ç‚¹é€šè¿‡åœ¨elasticsearch.ymlä¸­é…ç½®discovery.zen.minimum_master_nodes: 2ï¼Œå°±å¯ä»¥é¿å…è„‘è£‚é—®é¢˜çš„äº§ç”Ÿã€‚</p><h2 id="å››ã€elasticsearchåº”ç”¨" tabindex="-1"><a class="header-anchor" href="#å››ã€elasticsearchåº”ç”¨" aria-hidden="true">#</a> å››ã€ElasticSearchåº”ç”¨</h2><h3 id="_1-elasticsearch-sql" tabindex="-1"><a class="header-anchor" href="#_1-elasticsearch-sql" aria-hidden="true">#</a> 1.Elasticsearch SQL</h3><figure><img src="/assets/img_126-fo6Yhh7P.png" alt="img_126.png" tabindex="0" loading="lazy"><figcaption>img_126.png</figcaption></figure><p>Elasticsearch SQLå…è®¸æ‰§è¡Œç±»SQLçš„æŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨RESTæ¥å£ã€å‘½ä»¤è¡Œæˆ–è€…æ˜¯JDBCï¼Œéƒ½å¯ä»¥ä½¿ç”¨SQLæ¥è¿›è¡Œæ•°æ®çš„æ£€ç´¢å’Œæ•°æ®çš„èšåˆã€‚</p><p>Elasticsearch SQLç‰¹ç‚¹ï¼š</p><p>æœ¬åœ°é›†æˆ</p><p>Elasticsearch SQLæ˜¯ä¸“é—¨ä¸ºElasticsearchæ„å»ºçš„ã€‚æ¯ä¸ªSQLæŸ¥è¯¢éƒ½æ ¹æ®åº•å±‚å­˜å‚¨å¯¹ç›¸å…³èŠ‚ç‚¹æœ‰æ•ˆæ‰§è¡Œã€‚</p><p>æ²¡æœ‰é¢å¤–çš„è¦æ±‚</p><p>ä¸ä¾èµ–å…¶ä»–çš„ç¡¬ä»¶ã€è¿›ç¨‹ã€è¿è¡Œæ—¶åº“ï¼ŒElasticsearch SQLå¯ä»¥ç›´æ¥è¿è¡Œåœ¨Elasticsearché›†ç¾¤ä¸Š</p><p>è½»é‡ä¸”é«˜æ•ˆ</p><p>åƒSQLé‚£æ ·ç®€æ´ã€é«˜æ•ˆåœ°å®ŒæˆæŸ¥è¯¢</p><p>Elasticsearch SQLæä¾›äº†sqlè½¬æ¢çš„åŠŸèƒ½ï¼Œä½†æ˜¯åªèƒ½æ»¡è¶³ä¸€äº›ç®€å•çš„æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼šä¸æ”¯æŒJOINã€ä¸æ”¯æŒè¾ƒå¤æ‚çš„å­æŸ¥è¯¢ã€‚å®˜æ–¹è¿˜æ˜¯æ¨èä½¿ç”¨DSLè¯­å¥æ¥å®ç°</p><h3 id="_2-javaå®¢æˆ·ç«¯" tabindex="-1"><a class="header-anchor" href="#_2-javaå®¢æˆ·ç«¯" aria-hidden="true">#</a> 2.Javaå®¢æˆ·ç«¯</h3><p>è¿™ä¸ªå°±è‡ªå·±çœ‹å®˜ç½‘å§</p><h3 id="_4-1-eså’Œmysqlçš„åŒå†™" tabindex="-1"><a class="header-anchor" href="#_4-1-eså’Œmysqlçš„åŒå†™" aria-hidden="true">#</a> 4.1 eså’Œmysqlçš„åŒå†™</h3><p>åŒå†™çš„æµç¨‹ï¼š</p><ul><li>1.å…ˆå†™æ•°æ®åº“ï¼Œç„¶åå†™esï¼Œesåªå­˜å¸¸æœç´¢çš„ç´¢å¼•å­—æ®µã€‚</li><li>2.è¯»å–æ—¶å…ˆè¯»esï¼Œæ‰¾åˆ°å¯¹åº”ä¸»é”®åï¼Œç„¶åæ ¹æ®ä¸»é”®åœ¨è¯»mysqlã€‚ï¼ˆè¿™ç§åœºæ™¯ä¸»è¦å‡ºç°åœ¨mysqlæ˜¯åˆ†è¡¨çš„ï¼Œè€Œä¸»é”®é…ç½®çš„æ˜¯åˆ†ç‰‡é”®ï¼Œéåˆ†ç‰‡é”®çš„æŸ¥è¯¢å°†æ‰«æå…¨è¡¨ï¼‰<br> é¦–å…ˆä¸å»ºè®®è¿›è¡ŒåŒå†™ï¼Œå› ä¸ºä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´è¿™æ ·æ–°çš„é—®é¢˜ã€‚é€ æˆä¸ä¸€è‡´çš„åŸå› ä¸ºå†™å…¥esæˆ–è€…æ›´æ–°eså­—æ®µå¤±è´¥ï¼ŒåŠ ä¸Šè¡¥å……æœºåˆ¶åä¹Ÿæ²¡æœ‰æˆåŠŸã€‚</li></ul><p>åŒå†™çš„åŒæ­¥</p><p>åˆ†é¡µæŸ¥è¯¢mysqlä¸­çš„æ•°æ®ï¼Œæ”¾å…¥mqä¸­ï¼ˆæ”¾å…¥mqä¸­çš„åŸå› ï¼Œä¸ºè¯»å–mysqlçš„çº¿ç¨‹ä¼šè¿œæ¯”æ‰§è¡ŒåŒæ­¥çš„çº¿ç¨‹é€Ÿåº¦å¿«ï¼‰ï¼ŒåŒæ­¥çº¿ç¨‹ä»mqä¸­æ‹‰èµ·æ•°æ®ï¼Œç„¶åå’Œeså¯¹æ¯”ï¼Œå¦‚æœä¸åŒï¼Œä¸mysqlä¸­çš„æ•°æ®ä¸ºå‡†ï¼Œè¿›è¡Œåˆ é™¤å¤åˆ¶ã€‚</p><p>è¡¥å¿æœºåˆ¶</p><p>æˆ‘è®¤ä¸ºä»»ä½•å¯¹eså†™å¤±è´¥ï¼Œæ›´æ–°å¤±è´¥ï¼Œåˆ é™¤å¤±è´¥éƒ½åº”è¯¥çºªå½•ä¸‹æ¥ï¼Œç„¶åå»æ‰‹åŠ¨æ“ä½œä½¿å…¶åŒæ­¥ã€‚</p><h2 id="äº”ã€elasticsearchå®‰è£…é…ç½®" tabindex="-1"><a class="header-anchor" href="#äº”ã€elasticsearchå®‰è£…é…ç½®" aria-hidden="true">#</a> äº”ã€ElasticSearchå®‰è£…é…ç½®</h2><h3 id="_1-å®‰è£…elasticsearch" tabindex="-1"><a class="header-anchor" href="#_1-å®‰è£…elasticsearch" aria-hidden="true">#</a> 1.å®‰è£…ElasticSearch</h3><p>è§£å‹ä¸‹è½½çš„å‹ç¼©åŒ…ï¼Œæœ¬æ¬¡ä½¿ç”¨7.14.0ç‰ˆæœ¬</p><p>ä»v7å¼€å§‹ï¼Œelasticsearchä¸ç”¨å•ç‹¬å®‰è£…JDKï¼Œå› ä¸ºå®ƒåœ¨ä¸‹è½½æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½å¯¹åº”çš„jdkåŒ…ã€‚å› æ­¤ä¸ç”¨é¢å¤–ä¸‹è½½jdkå’Œé…ç½®ç¯å¢ƒå˜é‡ã€‚</p><p>åœ¨ç»ˆç«¯cdåˆ°elasticsearchçš„binç›®å½•ï¼Œè¿è¡Œå‘½ä»¤./elasticsearchå³å¯å¼€å¯esæ•°æ®åº“æœåŠ¡ï¼ˆåœ¨ç»ˆç«¯é€šè¿‡æŒ‰control + cå¯åœæ­¢æœåŠ¡ï¼‰ã€‚åœ¨ç½‘é¡µä¸­è®¿é—®localhost:9200çœ‹åˆ°jsonç»“æœå³å¯åŠ¨æˆåŠŸã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure><img src="/assets/img_127-z3NbEVSs.png" alt="img_127.png" tabindex="0" loading="lazy"><figcaption>img_127.png</figcaption></figure><h3 id="_2-å®‰è£…kibana" tabindex="-1"><a class="header-anchor" href="#_2-å®‰è£…kibana" aria-hidden="true">#</a> 2.å®‰è£…Kibana</h3><p>ä¸‹è½½å¯è§†åŒ–å·¥å…·Kibanahttps://www.elastic.co/cn/downloads/kibana</p><p>è§£å‹ä¸‹è½½çš„å‹ç¼©åŒ…ï¼Œå¹¶å°†å…¶å¤åˆ¶ç²˜è´´è‡³è‡ªå·±æƒ³è¦å­˜æ”¾çš„ç›®å½•ã€‚Kibanaçš„ç‰ˆæœ¬æœ€å¥½å’Œesä¿æŒä¸€è‡´ï¼Œå¦‚è¿™æ¬¡åŒæ ·ä½¿ç”¨7.14.0ç‰ˆæœ¬</p><p>å¯åŠ¨Kibana</p><p>åœ¨ç»ˆç«¯cdåˆ°Kibanaç›®å½•ä¸‹ï¼Œè¿è¡Œå‘½ä»¤./Kibanaå³å¯å¼€å¯Kibanaçš„ç«¯å£è®¿é—®ã€‚åœ¨ç½‘é¡µä¸­è®¿é—®http://localhost:5601è·³è½¬åˆ°å¦‚ä¸‹ç•Œé¢å³è®¿é—®æˆåŠŸã€‚</p><p>è®¿é—®ä¸‹é¢åœ°å€ï¼š<a href="http://localhost:5601/app/dev_tools#/console" target="_blank" rel="noopener noreferrer">http://localhost:5601/app/dev_tools#/console<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å¯è¿›å…¥ç®¡ç†åå°</p><figure><img src="/assets/img_128-j9CBPv0l.png" alt="img_128.png" tabindex="0" loading="lazy"><figcaption>img_128.png</figcaption></figure><p>ElasticSearchå¯è§†åŒ–å·¥å…·ä¹‹cerebro</p></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a aria-label="DevOpsåŸºæœ¬æ¦‚å¿µ" class="vp-link nav-link prev nav-link prev" href="/highfreq/devops.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>DevOpsåŸºæœ¬æ¦‚å¿µ</div></a><a aria-label="Jenkinsè¯¦è§£" class="vp-link nav-link next nav-link next" href="/highfreq/jenkins.html"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Jenkinsè¯¦è§£<span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span></div></a></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright Â© 2024 UJava</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-I9ix_QCV.js" defer></script>
  </body>
</html>
